{"version":3,"file":"content.js","sources":["src/lib/core/EventBus.js","src/lib/core/StateManager.js","src/lib/ui/styles.js","src/lib/ui/BubbleUI.js","src/lib/ui/TopBanner.js","src/lib/utils/dom.js","src/lib/ui/ContextTags.js","src/lib/selection/HighlightManager.js","src/lib/selection/ElementSelector.js","src/lib/selection/ScreenshotSelector.js","src/lib/engine/EngineManager.js","src/lib/engine/HealthChecker.js","src/lib/communication/ChromeBridge.js","src/lib/communication/ServerClient.js","src/content.js"],"sourcesContent":["/**\n * EventBus - Simple publish/subscribe event system\n * Enables loose coupling between modules\n */\n\nexport default class EventBus {\n  constructor() {\n    this.listeners = new Map();\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event - Event name (supports namespaces like 'element:selected')\n   * @param {Function} callback - Handler function\n   * @returns {Function} Unsubscribe function\n   */\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, []);\n    }\n    \n    this.listeners.get(event).push(callback);\n    \n    // Return unsubscribe function\n    return () => this.off(event, callback);\n  }\n\n  /**\n   * Subscribe to an event (one-time)\n   * @param {string} event - Event name\n   * @param {Function} callback - Handler function\n   */\n  once(event, callback) {\n    const onceCallback = (...args) => {\n      callback(...args);\n      this.off(event, onceCallback);\n    };\n    \n    this.on(event, onceCallback);\n  }\n\n  /**\n   * Unsubscribe from an event\n   * @param {string} event - Event name\n   * @param {Function} callback - Handler function to remove\n   */\n  off(event, callback) {\n    if (!this.listeners.has(event)) return;\n    \n    const callbacks = this.listeners.get(event);\n    const index = callbacks.indexOf(callback);\n    \n    if (index > -1) {\n      callbacks.splice(index, 1);\n    }\n    \n    // Clean up empty listener arrays\n    if (callbacks.length === 0) {\n      this.listeners.delete(event);\n    }\n  }\n\n  /**\n   * Emit an event\n   * @param {string} event - Event name\n   * @param {...any} args - Arguments to pass to handlers\n   */\n  emit(event, ...args) {\n    if (!this.listeners.has(event)) return;\n    \n    const callbacks = this.listeners.get(event).slice(); // Clone to prevent modification during iteration\n    \n    // Error isolation: one handler error doesn't affect others\n    callbacks.forEach(callback => {\n      try {\n        callback(...args);\n      } catch (error) {\n        console.error(`[EventBus] Error in handler for event \"${event}\":`, error);\n      }\n    });\n  }\n\n  /**\n   * Remove all listeners for an event (or all events if no event specified)\n   * @param {string} [event] - Event name (optional)\n   */\n  clear(event) {\n    if (event) {\n      this.listeners.delete(event);\n    } else {\n      this.listeners.clear();\n    }\n  }\n\n  /**\n   * Get listener count for an event\n   * @param {string} event - Event name\n   * @returns {number} Number of listeners\n   */\n  listenerCount(event) {\n    return this.listeners.has(event) ? this.listeners.get(event).length : 0;\n  }\n}\n\n","/**\n * StateManager - Centralized state management with observer pattern\n * Manages all application state and notifies listeners on changes\n */\n\nexport default class StateManager {\n  constructor(eventBus) {\n    this.eventBus = eventBus;\n    \n    // Initial state structure\n    this.state = {\n      ui: {\n        bubbleVisible: false,\n        bubblePosition: { left: 24, bottom: 24 },\n        mode: 'idle', // 'idle' | 'element' | 'screenshot'\n        loading: false,\n        loadingText: 'Processing...'\n      },\n      selection: {\n        elements: [],\n        screenshots: [],\n        hoveredElement: null\n      },\n      engine: {\n        current: 'codex',\n        available: {\n          codex: false,\n          claude: false\n        },\n        serverHealthy: false,\n        restored: false // Flag to prevent overwriting user selection\n      },\n      processing: {\n        active: false,\n        stage: null\n      },\n      projects: {\n        allowed: true,\n        current: null,\n        list: []\n      }\n    };\n    \n    // Subscribers for specific state paths\n    this.subscribers = new Map();\n  }\n\n  /**\n   * Get current state or specific path\n   * @param {string} [path] - Dot-separated path (e.g., 'ui.bubbleVisible')\n   * @returns {any} State value\n   */\n  get(path) {\n    if (!path) return this.state;\n    \n    return this._getNestedValue(this.state, path);\n  }\n\n  /**\n   * Update state at specific path\n   * @param {string} path - Dot-separated path\n   * @param {any} value - New value\n   * @param {boolean} [silent=false] - Skip notifications if true\n   */\n  set(path, value, silent = false) {\n    const oldValue = this.get(path);\n    \n    // Only update if value actually changed\n    if (oldValue === value) return;\n    \n    this._setNestedValue(this.state, path, value);\n    \n    if (!silent) {\n      this._notify(path, value, oldValue);\n    }\n  }\n\n  /**\n   * Update multiple state paths at once\n   * @param {Object} updates - Object with path: value pairs\n   */\n  batch(updates) {\n    Object.entries(updates).forEach(([path, value]) => {\n      this.set(path, value, true); // Silent updates\n    });\n    \n    // Single notification for all changes\n    this.eventBus.emit('state:batch-update', updates);\n  }\n\n  /**\n   * Subscribe to state changes at specific path\n   * @param {string} path - Dot-separated path\n   * @param {Function} callback - Called with (newValue, oldValue)\n   * @returns {Function} Unsubscribe function\n   */\n  subscribe(path, callback) {\n    if (!this.subscribers.has(path)) {\n      this.subscribers.set(path, []);\n    }\n    \n    this.subscribers.get(path).push(callback);\n    \n    // Return unsubscribe function\n    return () => {\n      const callbacks = this.subscribers.get(path);\n      if (callbacks) {\n        const index = callbacks.indexOf(callback);\n        if (index > -1) {\n          callbacks.splice(index, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Get state snapshot (deep clone for debugging)\n   * @returns {Object} Cloned state\n   */\n  snapshot() {\n    return JSON.parse(JSON.stringify(this.state));\n  }\n\n  /**\n   * Reset state to initial values\n   */\n  reset() {\n    const oldState = this.snapshot();\n    \n    this.state = {\n      ui: {\n        bubbleVisible: false,\n        bubblePosition: { left: 24, bottom: 24 },\n        mode: 'idle',\n        loading: false,\n        loadingText: 'Processing...'\n      },\n      selection: {\n        elements: [],\n        screenshots: [],\n        hoveredElement: null\n      },\n      engine: {\n        current: 'codex',\n        available: {\n          codex: false,\n          claude: false\n        },\n        serverHealthy: false,\n        restored: false\n      },\n      processing: {\n        active: false,\n        stage: null\n      },\n      projects: {\n        allowed: true,\n        current: null,\n        list: []\n      }\n    };\n    \n    this.eventBus.emit('state:reset', this.state, oldState);\n  }\n\n  // Private methods\n\n  _getNestedValue(obj, path) {\n    return path.split('.').reduce((current, key) => {\n      return current?.[key];\n    }, obj);\n  }\n\n  _setNestedValue(obj, path, value) {\n    const keys = path.split('.');\n    const lastKey = keys.pop();\n    \n    const target = keys.reduce((current, key) => {\n      if (!(key in current)) {\n        current[key] = {};\n      }\n      return current[key];\n    }, obj);\n    \n    target[lastKey] = value;\n  }\n\n  _notify(path, newValue, oldValue) {\n    // Notify specific path subscribers\n    if (this.subscribers.has(path)) {\n      this.subscribers.get(path).forEach(callback => {\n        try {\n          callback(newValue, oldValue);\n        } catch (error) {\n          console.error(`[StateManager] Error in subscriber for \"${path}\":`, error);\n        }\n      });\n    }\n    \n    // Emit global state change event\n    this.eventBus.emit('state:change', { path, newValue, oldValue });\n    \n    // Emit specific state change event\n    this.eventBus.emit(`state:${path}`, newValue, oldValue);\n  }\n}\n","/**\n * UI Styles - Centralized CSS definitions\n * All Shadow DOM styles in one place\n */\n\nexport const BUBBLE_STYLES = `\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  :host {\n    --bg-primary: rgba(15, 23, 42, 0.95);\n    --bg-secondary: rgba(30, 41, 59, 0.9);\n    --accent-blue: #3b82f6;\n    --accent-green: #10b981;\n    --text-primary: rgba(248, 250, 252, 0.95);\n    --text-secondary: rgba(226, 232, 240, 0.6);\n    --border: rgba(148, 163, 184, 0.2);\n  }\n\n  .bubble {\n    width: 420px;\n    background: var(--bg-primary);\n    backdrop-filter: blur(24px) saturate(180%);\n    border-radius: 12px;\n    border: 1px solid var(--border);\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    color: var(--text-primary);\n    animation: slideInUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n    overflow: hidden;\n  }\n\n  @keyframes slideInUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  /* Top Bar */\n  .top-bar {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 16px;\n    border-bottom: 1px solid var(--border);\n    background: rgba(15, 23, 42, 0.6);\n  }\n\n  .left-section {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    position: relative;\n  }\n\n  .logo {\n    font-size: 14px;\n    font-weight: 600;\n    letter-spacing: 0.5px;\n  }\n\n  .engine-selector {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 4px 10px;\n    background: rgba(255, 255, 255, 0.05);\n    border: 1px solid var(--border);\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.15s;\n  }\n\n  .engine-selector:hover {\n    background: rgba(255, 255, 255, 0.08);\n    border-color: rgba(148, 163, 184, 0.3);\n  }\n\n  .status-indicator {\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background: var(--accent-green);\n    animation: pulse 2s ease-in-out infinite;\n  }\n\n  .status-indicator.offline {\n    background: #ef4444;\n    animation: none;\n  }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n\n  .engine-name {\n    font-size: 12px;\n    font-weight: 500;\n  }\n\n  .dropdown-arrow {\n    font-size: 10px;\n    opacity: 0.6;\n    transition: transform 0.2s;\n  }\n\n  .engine-selector.open .dropdown-arrow {\n    transform: rotate(180deg);\n  }\n\n  /* Engine Dropdown */\n  .engine-dropdown {\n    position: absolute;\n    top: calc(100% + 4px);\n    left: 0;\n    min-width: 120px;\n    background: rgba(30, 41, 59, 0.98);\n    backdrop-filter: blur(12px);\n    border: 1px solid var(--border);\n    border-radius: 6px;\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n    display: none;\n    z-index: 100;\n    animation: dropdownSlideIn 0.2s ease-out;\n  }\n\n  @keyframes dropdownSlideIn {\n    from {\n      opacity: 0;\n      transform: translateY(-8px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .engine-dropdown.open {\n    display: block;\n  }\n\n  .engine-option {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 12px;\n    cursor: pointer;\n    transition: background 0.15s;\n    font-size: 12px;\n  }\n\n  .engine-option:hover {\n    background: rgba(255, 255, 255, 0.08);\n  }\n\n  .engine-option.disabled {\n    cursor: not-allowed;\n    opacity: 0.55;\n    pointer-events: auto;\n  }\n\n  .engine-option:first-child {\n    border-radius: 6px 6px 0 0;\n  }\n\n  .engine-option:last-child {\n    border-radius: 0 0 6px 6px;\n  }\n\n  .engine-option-name {\n    font-weight: 500;\n  }\n\n  .engine-check {\n    opacity: 0;\n    color: var(--accent-green);\n    font-size: 14px;\n  }\n\n  .engine-option.selected .engine-check {\n    opacity: 1;\n  }\n\n  .engine-option-left {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n\n  .engine-status-dot {\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background: #6b7280;\n  }\n\n  .engine-status-dot.available {\n    background: var(--accent-green);\n  }\n\n  .right-section {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n\n  .icon-btn {\n    width: 28px;\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid transparent;\n    background: transparent;\n    border-radius: 6px;\n    cursor: pointer;\n    color: var(--text-secondary);\n    transition: all 0.15s;\n  }\n\n  .icon-btn:hover {\n    background: rgba(255, 255, 255, 0.08);\n    color: var(--text-primary);\n    border-color: var(--border);\n  }\n\n  .icon-btn.active {\n    background: var(--accent-blue);\n    color: white;\n    border-color: var(--accent-blue);\n  }\n\n  .icon-btn svg {\n    width: 16px;\n    height: 16px;\n  }\n\n  /* Context Tags */\n  .context-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n    padding: 8px 8px;\n  }\n\n  .context-tags:empty {\n    display: none;\n  }\n\n  .context-tag {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    padding: 4px 8px;\n    background: rgba(59, 130, 246, 0.15);\n    border: 1px solid rgba(59, 130, 246, 0.3);\n    border-radius: 6px;\n    font-size: 11px;\n    font-weight: 500;\n    color: #93c5fd;\n    animation: scaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  @keyframes scaleIn {\n    from {\n      opacity: 0;\n      transform: scale(0.8);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n\n  /* Screenshot tags use same base styling as element tags; inserted state turns green */\n\n  .tag-label {\n    cursor: pointer;\n  }\n\n  .tag-remove {\n    width: 14px;\n    height: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 3px;\n    cursor: pointer;\n    font-size: 10px;\n    opacity: 0.6;\n    transition: all 0.15s;\n  }\n\n  .tag-remove:hover {\n    opacity: 1;\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  .context-tag.inserted {\n    background: rgba(34, 197, 94, 0.15);\n    border-color: rgba(34, 197, 94, 0.3);\n    color: #86efac;\n  }\n\n  .context-tag.inserted .tag-label {\n    opacity: 0.7;\n  }\n\n  /* Inline Element Tags (inside contenteditable) */\n  .inline-element-tag {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 2px 6px;\n    background: rgba(59, 130, 246, 0.25);\n    border: 1px solid rgba(59, 130, 246, 0.4);\n    border-radius: 4px;\n    font-size: 11px;\n    font-weight: 500;\n    color: #93c5fd;\n    cursor: default;\n    user-select: none;\n    margin: 0 2px;\n    vertical-align: middle;\n  }\n\n  .inline-tag-remove {\n    font-size: 9px;\n    opacity: 0.7;\n    margin-left: 2px;\n  }\n\n  .inline-tag-remove:hover {\n    opacity: 1;\n  }\n\n  /* Input Container */\n  .input-container {\n    padding: 16px;\n    position: relative;\n  }\n\n  .input-wrapper {\n    position: relative;\n    background: var(--bg-secondary);\n    border: 1px solid var(--border);\n    border-radius: 8px;\n    transition: all 0.15s;\n  }\n\n  .input-wrapper:focus-within {\n    border-color: var(--accent-blue);\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  .input-field {\n    width: 100%;\n    min-height: 80px;\n    max-height: 200px;\n    padding: 12px 48px 12px 12px;\n    background: transparent;\n    border: none;\n    color: var(--text-primary);\n    font-size: 13px;\n    font-family: inherit;\n    line-height: 1.5;\n    outline: none;\n    overflow-y: auto;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n\n  .input-field:empty:before {\n    content: attr(data-placeholder);\n    color: var(--text-secondary);\n    pointer-events: none;\n  }\n\n  .send-btn {\n    position: absolute;\n    right: 8px;\n    bottom: 8px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: var(--accent-blue);\n    border: none;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.15s;\n    color: white;\n  }\n\n  .send-btn:hover:not(:disabled) {\n    background: #2563eb;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n  }\n\n  .send-btn:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  .send-btn:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n\n  .send-btn svg {\n    width: 16px;\n    height: 16px;\n  }\n\n  /* Loading Overlay */\n  .loading-overlay {\n    position: absolute;\n    inset: 0;\n    display: none;\n    align-items: center;\n    justify-content: center;\n    background: rgba(15, 23, 42, 0.9);\n    backdrop-filter: blur(4px);\n    border-radius: 8px;\n    animation: fadeIn 0.2s;\n  }\n\n  .loading-overlay.active {\n    display: flex;\n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n\n  .loading-content {\n    text-align: center;\n  }\n\n  .spinner {\n    width: 32px;\n    height: 32px;\n    border: 3px solid rgba(59, 130, 246, 0.2);\n    border-top-color: var(--accent-blue);\n    border-radius: 50%;\n    animation: spin 0.8s linear infinite;\n    margin: 0 auto 8px;\n  }\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n\n  .loading-text {\n    font-size: 12px;\n    color: var(--text-secondary);\n  }\n\n  /* Status Message */\n  .status-message {\n    padding: 12px 16px;\n    border-top: 1px solid var(--border);\n    font-size: 12px;\n    display: none;\n    align-items: center;\n    gap: 8px;\n    animation: slideDown 0.2s;\n    position: relative;\n  }\n\n  @keyframes slideDown {\n    from {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .status-message.active {\n    display: flex;\n  }\n\n  .status-message.success {\n    background: rgba(16, 185, 129, 0.1);\n    color: var(--accent-green);\n  }\n\n  .status-message.error {\n    background: rgba(239, 68, 68, 0.1);\n    color: #ef4444;\n  }\n\n  #status-text {\n    flex: 1;\n  }\n\n  .status-close {\n    width: 20px;\n    height: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: transparent;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 16px;\n    color: inherit;\n    opacity: 0.6;\n    transition: all 0.15s;\n  }\n\n  .status-close:hover {\n    opacity: 1;\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  /* Drag Handle */\n  .drag-handle {\n    cursor: move;\n    user-select: none;\n    touch-action: none;\n  }\n\n  .bubble.dragging {\n    transition: none !important;\n    pointer-events: none;\n  }\n\n  .bubble.dragging * {\n    pointer-events: none;\n  }\n`;\n\nexport const GLOBAL_STYLES = `\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  @keyframes scaleIn {\n    from {\n      opacity: 0;\n      transform: scale(0.8);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n  @keyframes slideDown {\n    from {\n      transform: translateY(-100%);\n    }\n    to {\n      transform: translateY(0);\n    }\n  }\n  /* Global cursor helpers for selection modes */\n  html.lumi-element-cursor, body.lumi-element-cursor { cursor: pointer !important; }\n  html.lumi-screenshot-cursor, body.lumi-screenshot-cursor { cursor: crosshair !important; }\n  html.lumi-screenshot-cursor *, body.lumi-screenshot-cursor * {\n    cursor: crosshair !important;\n  }\n`;\n","/**\n * BubbleUI - Main Bubble interface with Shadow DOM\n */\n\nimport { BUBBLE_STYLES } from './styles.js';\n\nexport default class BubbleUI {\n  constructor(eventBus, stateManager) {\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.container = null;\n    this.shadow = null;\n  }\n\n  mount() {\n    if (this.container) return;\n    \n    // Create container\n    this.container = document.createElement('div');\n    this.container.id = 'lumi-bubble-container';\n    this.container.style.cssText = `\n      position: fixed;\n      left: 24px;\n      bottom: 24px;\n      z-index: 2147483647;\n      display: none;\n    `;\n    \n    // Create Shadow DOM\n    this.shadow = this.container.attachShadow({ mode: 'open' });\n    this.shadow.innerHTML = this.getHTML();\n    \n    document.body.appendChild(this.container);\n    \n    // Setup event listeners\n    this.setupListeners();\n  }\n\n  getHTML() {\n    return `\n      <style>${BUBBLE_STYLES}</style>\n      \n      <div class=\"bubble\" id=\"bubble-main\">\n        <!-- Top Bar (draggable) -->\n        <div class=\"top-bar drag-handle\" id=\"drag-handle\">\n          <div class=\"left-section\">\n            <div class=\"logo\">LUMI</div>\n            <div class=\"engine-selector\" id=\"engine-selector\">\n              <div class=\"status-indicator\" id=\"status-indicator\"></div>\n              <span class=\"engine-name\" id=\"engine-name\">Codex</span>\n              <span class=\"dropdown-arrow\">▼</span>\n            </div>\n            <!-- Engine Dropdown Menu -->\n            <div class=\"engine-dropdown\" id=\"engine-dropdown\">\n              <div class=\"engine-option selected\" data-engine=\"codex\">\n                <div class=\"engine-option-left\">\n                  <span class=\"engine-status-dot\" id=\"engine-status-codex\"></span>\n                  <span class=\"engine-option-name\">Codex</span>\n                </div>\n                <span class=\"engine-check\">✓</span>\n              </div>\n              <div class=\"engine-option\" data-engine=\"claude\">\n                <div class=\"engine-option-left\">\n                  <span class=\"engine-status-dot\" id=\"engine-status-claude\"></span>\n                  <span class=\"engine-option-name\">Claude</span>\n                </div>\n                <span class=\"engine-check\">✓</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"right-section\">\n            <button class=\"icon-btn\" id=\"element-mode-btn\" title=\"Element Mode (Cmd+E)\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\"/>\n                <path d=\"M3 9h18M9 3v18\"/>\n              </svg>\n            </button>\n            <button class=\"icon-btn\" id=\"screenshot-mode-btn\" title=\"Screenshot Mode (Cmd+S)\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\"/>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"/>\n              </svg>\n            </button>\n            <button class=\"icon-btn\" id=\"close-btn\" title=\"Close (Esc)\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M18 6L6 18M6 6l12 12\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <!-- Input Container -->\n        <div class=\"input-container\">\n          <!-- Context Tags (elements + screenshot) -->\n          <div class=\"context-tags\" id=\"context-tags\"></div>\n          <div class=\"input-wrapper\">\n            <div \n              class=\"input-field\" \n              id=\"intent-input\" \n              contenteditable=\"true\"\n              data-placeholder=\"Type your instructions...\"\n            ></div>\n            <button class=\"send-btn\" id=\"send-btn\" disabled>\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\n              </svg>\n            </button>\n            <div class=\"loading-overlay\" id=\"loading-overlay\">\n              <div class=\"loading-content\">\n                <div class=\"spinner\"></div>\n                <div class=\"loading-text\" id=\"loading-text\">Processing...</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Status Message -->\n        <div class=\"status-message\" id=\"status-message\">\n          <span class=\"status-icon\" id=\"status-icon\"></span>\n          <span id=\"status-text\"></span>\n          <button class=\"status-close\" id=\"status-close\">×</button>\n        </div>\n      </div>\n    `;\n  }\n\n  setupListeners() {\n    try { console.log('[BubbleUI] setupListeners invoked'); } catch (_) {}\n    // Close button\n    const closeBtn = this.shadow.getElementById('close-btn');\n    closeBtn.addEventListener('click', () => {\n      this.eventBus.emit('bubble:close');\n    });\n    \n    // Mode buttons\n    const elementModeBtn = this.shadow.getElementById('element-mode-btn');\n    const screenshotModeBtn = this.shadow.getElementById('screenshot-mode-btn');\n    \n    elementModeBtn.addEventListener('click', () => {\n      this.eventBus.emit('mode:toggle-element');\n    });\n    \n    screenshotModeBtn.addEventListener('click', () => {\n      this.eventBus.emit('mode:toggle-screenshot');\n    });\n    \n    // Input field\n    const inputField = this.shadow.getElementById('intent-input');\n    const sendBtn = this.shadow.getElementById('send-btn');\n    \n    inputField.addEventListener('input', () => {\n      this.eventBus.emit('input:changed');\n      this.updateSendButtonState();\n    });\n    \n    inputField.addEventListener('keydown', (e) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\n        e.preventDefault();\n        this.eventBus.emit('submit:requested');\n      }\n      // Prevent host page shortcuts from intercepting while typing in bubble\n      e.stopPropagation();\n    });\n\n    // Make sure page-level shortcuts don't override bubble when focused\n    try {\n      this.shadow.addEventListener('keydown', (e) => {\n        if (this.shadow.contains(e.target)) e.stopPropagation();\n      }, { capture: true });\n      this.shadow.addEventListener('keypress', (e) => {\n        if (this.shadow.contains(e.target)) e.stopPropagation();\n      }, { capture: true });\n      this.shadow.addEventListener('keyup', (e) => {\n        if (this.shadow.contains(e.target)) e.stopPropagation();\n      }, { capture: true });\n    } catch (_) {}\n    \n    sendBtn.addEventListener('click', () => {\n      this.eventBus.emit('submit:requested');\n    });\n    \n    // Engine selector dropdown\n    const engineSelector = this.shadow.getElementById('engine-selector');\n    engineSelector.addEventListener('click', (e) => {\n      e.stopPropagation();\n      // Defensive: ensure we are not in dragging state so dropdown is clickable\n      const bubbleMain = this.shadow.getElementById('bubble-main');\n      if (bubbleMain) bubbleMain.classList.remove('dragging');\n      this.toggleEngineDropdown();\n    });\n    \n    // Engine options (event delegation for reliability)\n    const engineDropdown = this.shadow.getElementById('engine-dropdown');\n    if (!engineDropdown) {\n      try { console.warn('[BubbleUI] engine-dropdown not found'); } catch (_) {}\n    }\n    engineDropdown.addEventListener('pointerdown', (e) => {\n      const option = e.target.closest('.engine-option');\n      if (!option) return;\n      e.stopPropagation();\n      e.preventDefault();\n      const bubbleMain = this.shadow.getElementById('bubble-main');\n      if (bubbleMain) bubbleMain.classList.remove('dragging');\n      const engine = option.dataset.engine;\n      try { console.log('[BubbleUI] pointerdown on option:', engine); } catch (_) {}\n      if (option.classList.contains('disabled')) {\n        const message = engine === 'claude'\n          ? 'Claude CLI not detected. Please install Claude Code CLI to enable.'\n          : 'Codex CLI not detected. Please install Codex CLI to enable.';\n        this.showStatus(message, 'error');\n        this.eventBus.emit('notify:error', message);\n        this.closeEngineDropdown();\n        return;\n      }\n      this.eventBus.emit('engine:select', engine);\n      try { console.log('[BubbleUI] Emitted engine:select', engine); } catch (_) {}\n      this.closeEngineDropdown();\n    });\n    \n    // Close dropdown when clicking outside\n    document.addEventListener('click', () => {\n      this.closeEngineDropdown();\n    });\n    \n    // Status close button\n    const statusClose = this.shadow.getElementById('status-close');\n    statusClose.addEventListener('click', () => {\n      this.hideStatus();\n    });\n    \n    // Drag functionality\n    this.setupDrag();\n    \n    // State subscriptions\n    this.stateManager.subscribe('ui.mode', (mode) => {\n      this.updateModeButtons(mode);\n    });\n    \n    this.stateManager.subscribe('engine.current', (engine) => {\n      this.updateEngineSelector(engine);\n    });\n    \n    this.stateManager.subscribe('engine.serverHealthy', (healthy) => {\n      this.updateServerStatus(healthy);\n    });\n    \n    this.stateManager.subscribe('engine.available', (available) => {\n      this.updateEngineAvailability(available);\n    });\n\n    // Sync initial UI with current state snapshot\n    this.updateModeButtons(this.stateManager.get('ui.mode'));\n    this.updateEngineSelector(this.stateManager.get('engine.current'));\n    this.updateServerStatus(this.stateManager.get('engine.serverHealthy'));\n    this.updateEngineAvailability(this.stateManager.get('engine.available'));\n  }\n\n  setupDrag() {\n    const dragHandle = this.shadow.getElementById('drag-handle');\n    const bubbleMain = this.shadow.getElementById('bubble-main');\n    if (!dragHandle || !bubbleMain) return;\n\n    let isDragging = false;\n    let startX = 0;\n    let startY = 0;\n    let initialLeft = 0;\n    let initialBottom = 0;\n    let bubbleWidth = 0;\n    let bubbleHeight = 0;\n    let activePointerId = null;\n\n    const startDrag = (clientX, clientY) => {\n      isDragging = true;\n      startX = clientX;\n      startY = clientY;\n\n      const rect = this.container.getBoundingClientRect();\n      initialLeft = rect.left;\n      initialBottom = window.innerHeight - rect.bottom;\n      bubbleWidth = rect.width;\n      bubbleHeight = rect.height;\n\n      bubbleMain.classList.add('dragging');\n    };\n\n    const updateDrag = (clientX, clientY) => {\n      if (!isDragging) return;\n\n      const deltaX = clientX - startX;\n      const deltaY = clientY - startY;\n\n      let newLeft = initialLeft + deltaX;\n      let newBottom = initialBottom - deltaY;\n\n      const maxLeft = Math.max(0, window.innerWidth - bubbleWidth);\n      const maxBottom = Math.max(0, window.innerHeight - bubbleHeight);\n\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\n      newBottom = Math.min(Math.max(0, newBottom), maxBottom);\n\n      this.container.style.left = newLeft + 'px';\n      this.container.style.bottom = newBottom + 'px';\n    };\n\n    const releasePointerCapture = () => {\n      if (activePointerId === null) return;\n      if (typeof dragHandle.releasePointerCapture === 'function') {\n        try {\n          dragHandle.releasePointerCapture(activePointerId);\n        } catch (_) {}\n      }\n      activePointerId = null;\n    };\n\n    const stopDragging = () => {\n      if (!isDragging) return;\n      isDragging = false;\n      releasePointerCapture();\n      bubbleMain.classList.remove('dragging');\n    };\n\n    const shouldIgnoreTarget = (target) => {\n      return target.closest('.icon-btn') || target.closest('.engine-selector');\n    };\n\n    const supportsPointerEvents = typeof window !== 'undefined' && window.PointerEvent;\n\n    if (supportsPointerEvents) {\n      dragHandle.addEventListener('pointerdown', (e) => {\n        if (e.pointerType === 'mouse' && e.button !== 0) return;\n        if (shouldIgnoreTarget(e.target)) return;\n\n        activePointerId = e.pointerId;\n\n        if (typeof dragHandle.setPointerCapture === 'function') {\n          try {\n            dragHandle.setPointerCapture(activePointerId);\n          } catch (_) {}\n        }\n\n        startDrag(e.clientX, e.clientY);\n        e.preventDefault();\n      });\n\n      dragHandle.addEventListener('pointermove', (e) => {\n        if (!isDragging || e.pointerId !== activePointerId) return;\n        updateDrag(e.clientX, e.clientY);\n      });\n\n      const pointerEndHandler = (e) => {\n        if (e.pointerId !== activePointerId) return;\n        stopDragging();\n      };\n\n      dragHandle.addEventListener('pointerup', pointerEndHandler);\n      dragHandle.addEventListener('pointercancel', pointerEndHandler);\n      dragHandle.addEventListener('lostpointercapture', stopDragging);\n    } else {\n      const handleMouseMove = (e) => {\n        if (!isDragging) return;\n        updateDrag(e.clientX, e.clientY);\n      };\n\n      const handleMouseUp = () => {\n        document.removeEventListener('mousemove', handleMouseMove, true);\n        document.removeEventListener('mouseup', handleMouseUp, true);\n        stopDragging();\n      };\n\n      dragHandle.addEventListener('mousedown', (e) => {\n        if (e.button !== 0) return;\n        if (shouldIgnoreTarget(e.target)) return;\n\n        startDrag(e.clientX, e.clientY);\n\n        document.addEventListener('mousemove', handleMouseMove, true);\n        document.addEventListener('mouseup', handleMouseUp, true);\n        e.preventDefault();\n      });\n    }\n\n    const cancelOnLeave = () => {\n      if (!isDragging) return;\n      stopDragging();\n    };\n\n    document.addEventListener('mouseleave', cancelOnLeave, true);\n    window.addEventListener('blur', stopDragging);\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState !== 'visible') stopDragging();\n    });\n  }\n\n  show() {\n    if (this.container) {\n      this.container.style.display = 'block';\n      this.stateManager.set('ui.bubbleVisible', true);\n    }\n  }\n\n  hide() {\n    if (this.container) {\n      this.container.style.display = 'none';\n      this.stateManager.set('ui.bubbleVisible', false);\n    }\n  }\n\n  updateModeButtons(mode) {\n    const elementBtn = this.shadow.getElementById('element-mode-btn');\n    const screenshotBtn = this.shadow.getElementById('screenshot-mode-btn');\n    \n    elementBtn.classList.toggle('active', mode === 'element');\n    screenshotBtn.classList.toggle('active', mode === 'screenshot');\n  }\n\n  updateEngineSelector(engine) {\n    const engineName = this.shadow.getElementById('engine-name');\n    try {\n      console.log('[BubbleUI] updateEngineSelector called with', engine, 'current label:', engineName?.textContent);\n    } catch (_) {}\n    engineName.textContent = engine === 'codex' ? 'Codex' : 'Claude';\n    try {\n      console.log('[BubbleUI] engine-name updated to', engineName.textContent);\n    } catch (_) {}\n    \n    this.shadow.querySelectorAll('.engine-option').forEach(opt => {\n      opt.classList.toggle('selected', opt.dataset.engine === engine);\n      try {\n        console.log('[BubbleUI] option', opt.dataset.engine, 'selected?', opt.classList.contains('selected'));\n      } catch (_) {}\n    });\n  }\n\n  updateServerStatus(healthy) {\n    const indicator = this.shadow.getElementById('status-indicator');\n    indicator.classList.toggle('offline', !healthy);\n  }\n\n  updateEngineAvailability(available) {\n    const codexDot = this.shadow.getElementById('engine-status-codex');\n    const claudeDot = this.shadow.getElementById('engine-status-claude');\n    const codexOption = this.shadow.querySelector('.engine-option[data-engine=\"codex\"]');\n    const claudeOption = this.shadow.querySelector('.engine-option[data-engine=\"claude\"]');\n    \n    codexDot.classList.toggle('available', !!available.codex);\n    claudeDot.classList.toggle('available', !!available.claude);\n    \n    if (codexOption) {\n      codexOption.classList.toggle('disabled', !available.codex);\n      codexOption.setAttribute('title', available.codex ? '' : 'Codex CLI not detected');\n    }\n    if (claudeOption) {\n      claudeOption.classList.toggle('disabled', !available.claude);\n      claudeOption.setAttribute('title', available.claude ? '' : 'Claude Code CLI not detected');\n    }\n  }\n\n  toggleEngineDropdown() {\n    const dropdown = this.shadow.getElementById('engine-dropdown');\n    const selector = this.shadow.getElementById('engine-selector');\n    \n    const isOpen = dropdown.classList.contains('open');\n    dropdown.classList.toggle('open', !isOpen);\n    selector.classList.toggle('open', !isOpen);\n  }\n\n  closeEngineDropdown() {\n    const dropdown = this.shadow.getElementById('engine-dropdown');\n    const selector = this.shadow.getElementById('engine-selector');\n    \n    dropdown.classList.remove('open');\n    selector.classList.remove('open');\n  }\n\n  setLoading(isLoading, text = 'Processing...') {\n    const loadingOverlay = this.shadow.getElementById('loading-overlay');\n    const loadingText = this.shadow.getElementById('loading-text');\n    \n    if (isLoading) {\n      loadingOverlay.classList.add('active');\n      loadingText.textContent = text;\n      this.stateManager.set('ui.loading', true);\n    } else {\n      loadingOverlay.classList.remove('active');\n      this.stateManager.set('ui.loading', false);\n    }\n  }\n\n  showStatus(message, type = 'success') {\n    const statusMessage = this.shadow.getElementById('status-message');\n    const statusIcon = this.shadow.getElementById('status-icon');\n    const statusText = this.shadow.getElementById('status-text');\n    \n    statusMessage.className = 'status-message active ' + type;\n    statusIcon.textContent = type === 'success' ? '✓' : '✕';\n    statusText.textContent = message;\n  }\n\n  hideStatus() {\n    const statusMessage = this.shadow.getElementById('status-message');\n    statusMessage.classList.remove('active');\n  }\n\n  getInputValue() {\n    const input = this.shadow.getElementById('intent-input');\n    return input ? input.textContent.trim() : '';\n  }\n\n  clearInput() {\n    const input = this.shadow.getElementById('intent-input');\n    if (input) {\n      input.textContent = '';\n      this.updateSendButtonState();\n    }\n  }\n\n  updateSendButtonState() {\n    const sendBtn = this.shadow.getElementById('send-btn');\n    const input = this.shadow.getElementById('intent-input');\n    const elements = this.stateManager.get('selection.elements');\n    const screenshots = this.stateManager.get('selection.screenshots') || [];\n    const projectAllowed = this.stateManager.get('projects.allowed');\n    \n    const hasContext = elements.length > 0 || screenshots.length > 0;\n    const hasIntent = input && input.textContent.trim().length > 0;\n    const isProcessing = this.stateManager.get('processing.active');\n    \n    sendBtn.disabled = !hasContext || !hasIntent || isProcessing || projectAllowed === false;\n  }\n\n  getShadowRoot() {\n    return this.shadow;\n  }\n\n  destroy() {\n    if (this.container) {\n      this.container.remove();\n      this.container = null;\n      this.shadow = null;\n    }\n  }\n}\n","/**\n * TopBanner - Top notification banner for mode hints\n */\n\nexport default class TopBanner {\n  constructor() {\n    this.banner = null;\n  }\n\n  mount() {\n    if (this.banner) return;\n    \n    this.banner = document.createElement('div');\n    this.banner.id = 'lumi-top-banner';\n    this.banner.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      z-index: 2147483646;\n      padding: 12px 24px;\n      background: rgba(59, 130, 246, 0.95);\n      backdrop-filter: blur(12px);\n      color: white;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 13px;\n      font-weight: 500;\n      text-align: center;\n      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);\n      display: none;\n      animation: slideDown 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n    `;\n    \n    document.body.appendChild(this.banner);\n  }\n\n  show(message) {\n    if (!this.banner) this.mount();\n    this.banner.textContent = message;\n    this.banner.style.display = 'block';\n  }\n\n  hide() {\n    if (this.banner) {\n      this.banner.style.display = 'none';\n    }\n  }\n\n  update(message) {\n    if (!message) {\n      this.hide();\n    } else {\n      this.show(message);\n    }\n  }\n\n  destroy() {\n    if (this.banner) {\n      this.banner.remove();\n      this.banner = null;\n    }\n  }\n}\n\n","/**\n * DOM Utilities\n */\n\n/**\n * Get CSS selector for an element\n */\nexport function getElementSelector(element) {\n  if (!element) return '';\n\n  // Prefer id when available\n  if (element.id) return `#${CSS.escape(element.id)}`;\n\n  const parts = [];\n  const tag = element.tagName ? element.tagName.toLowerCase() : '*';\n  parts.push(tag);\n\n  // Use up to 2 class names for specificity\n  const classes = Array.from(element.classList || []).slice(0, 2);\n  classes.forEach(cls => parts.push(`.${CSS.escape(cls)}`));\n\n  let selector = parts.join('');\n\n  // If selector without nth-child uniquely identifies element, return early\n  try {\n    if (element.ownerDocument?.querySelectorAll(selector).length === 1) {\n      return selector;\n    }\n  } catch (_) {\n    // Fall through if invalid selector\n  }\n\n  // Otherwise, include :nth-of-type and parent context to ensure uniqueness\n  const position = getNthOfType(element);\n  selector = `${selector}:nth-of-type(${position})`;\n\n  const parent = element.parentElement;\n  if (parent && parent !== document.body && parent !== document.documentElement) {\n    const parentSelector = getElementSelector(parent);\n    if (parentSelector) {\n      selector = `${parentSelector} > ${selector}`;\n    }\n  }\n\n  return selector;\n}\n\nfunction getNthOfType(element) {\n  if (!element || !element.parentElement) return 1;\n  const tagName = element.tagName;\n  if (!tagName) return 1;\n  let index = 1;\n  let sibling = element.previousElementSibling;\n  while (sibling) {\n    if (sibling.tagName === tagName) {\n      index += 1;\n    }\n    sibling = sibling.previousElementSibling;\n  }\n  return index;\n}\n\n/**\n * Get human-readable element name\n */\nexport function readableElementName(element) {\n  if (!element) return 'element';\n  if (element.id) return `#${element.id}`;\n  const firstClass = (element.className || '').split(' ').filter(Boolean)[0];\n  if (firstClass) return `${element.tagName.toLowerCase()}.${firstClass}`;\n  return element.tagName.toLowerCase();\n}\n\n/**\n * Get computed style summary for an element\n */\nexport function getComputedStyleSummary(element) {\n  const computed = window.getComputedStyle(element);\n  return {\n    display: computed.display,\n    position: computed.position,\n    width: computed.width,\n    height: computed.height,\n    backgroundColor: computed.backgroundColor,\n    color: computed.color,\n    fontSize: computed.fontSize,\n    fontFamily: computed.fontFamily,\n    padding: computed.padding,\n    margin: computed.margin,\n    border: computed.border\n  };\n}\n\n/**\n * Check if element should be ignored for selection\n */\nexport function shouldIgnoreElement(element) {\n  if (!element) return true;\n  \n  // Ignore LUMI's own elements\n  if (element.closest('#lumi-bubble-container') || \n      element.closest('#lumi-top-banner') ||\n      element.classList?.contains('lumi-highlight') ||\n      element.classList?.contains('lumi-screenshot-overlay')) {\n    return true;\n  }\n  \n  const tag = element.tagName && element.tagName.toLowerCase();\n  if (tag === 'html' || tag === 'body') return true;\n  \n  return false;\n}\n","/**\n * ContextTags - Manage context tags (elements and screenshot)\n * Handles tag display, deletion, and inline chip insertion\n */\n\nimport { readableElementName } from '../utils/dom.js';\n\nexport default class ContextTags {\n  constructor(shadowRoot, eventBus, stateManager) {\n    this.shadowRoot = shadowRoot;\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.container = null;\n    this.lastIntentRange = null; // persist caret position within intent input\n    this.CARET_MARK_ATTR = 'data-caret-marker';\n    this._pointerInserted = false;\n  }\n\n  mount() {\n    this.container = this.shadowRoot.getElementById('context-tags');\n    if (!this.container) {\n      console.error('[ContextTags] Container not found');\n    }\n\n    // Track caret position inside the intent input so we can restore it\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (input) {\n      const updateRange = (source) => {\n        const sel = this._getSelection();\n        if (sel && sel.rangeCount > 0 && input.contains(sel.anchorNode)) {\n          this.lastIntentRange = sel.getRangeAt(0).cloneRange();\n        }\n      };\n      // Capture on common user interactions that change caret (avoid 'focus' which may be [input,0])\n      ['keyup', 'mouseup', 'input'].forEach(evt => {\n        input.addEventListener(evt, () => updateRange(evt));\n      });\n\n      // Global selection tracking covers keyboard-based caret moves and OS selection changes\n      document.addEventListener('selectionchange', () => updateRange('selectionchange'));\n\n      input.addEventListener('mousedown', (e) => {\n        if (e.button !== 0) return; // left click only\n        try {\n          const x = e.clientX, y = e.clientY;\n          const hit = this._rangeFromPoint(x, y, input);\n          const shouldOverride = !!hit;\n          if (shouldOverride) e.preventDefault();\n          requestAnimationFrame(() => {\n            input.focus();\n            if (shouldOverride) {\n              const sel = this._getSelection();\n              sel.removeAllRanges();\n              sel.addRange(hit);\n              this.lastIntentRange = hit.cloneRange();\n            }\n          });\n        } catch (_) {}\n      });\n\n      // Capture selection just before any click inside the bubble changes it (capture phase)\n      const preClickSnapshot = () => {\n        const sel = this._getSelection();\n        if (sel && sel.rangeCount > 0 && input.contains(sel.anchorNode)) {\n          this.lastIntentRange = sel.getRangeAt(0).cloneRange();\n        }\n      };\n      try {\n        this.shadowRoot.addEventListener('pointerdown', preClickSnapshot, { capture: true });\n        this.shadowRoot.addEventListener('mousedown', preClickSnapshot, { capture: true });\n        this.shadowRoot.addEventListener('touchstart', preClickSnapshot, { capture: true, passive: true });\n      } catch (_) {\n        // Fallback for environments without options support\n        this.shadowRoot.addEventListener('pointerdown', preClickSnapshot, true);\n        this.shadowRoot.addEventListener('mousedown', preClickSnapshot, true);\n        this.shadowRoot.addEventListener('touchstart', preClickSnapshot, true);\n      }\n    }\n  }\n\n  render() {\n    if (!this.container) return;\n\n    this.container.innerHTML = '';\n\n    const elements = this.stateManager.get('selection.elements');\n    const screenshots = this.stateManager.get('selection.screenshots') || [];\n    const input = this.shadowRoot.getElementById('intent-input');\n\n    // Helper function to check if tag is already inserted\n    const isTagInserted = (type, index) => {\n      if (!input) return false;\n      if (type === 'screenshot') {\n        return input.querySelector(`.inline-element-tag[data-index=\"${String(index)}\"]`) !== null;\n      } else {\n        return input.querySelector(`.inline-element-tag[data-index=\"${String(index)}\"]`) !== null;\n      }\n    };\n\n    // Render element tags\n    elements.forEach((item, index) => {\n      const tag = document.createElement('div');\n      const isInserted = isTagInserted('element', index);\n\n      tag.className = `context-tag${isInserted ? ' inserted' : ''}`;\n      tag.innerHTML = `\n        <span class=\"tag-label\" data-index=\"${index}\" data-type=\"element\">${readableElementName(item.element)}</span>\n        <span class=\"tag-remove\" data-type=\"element\" data-index=\"${index}\">×</span>\n      `;\n      this.container.appendChild(tag);\n    });\n\n    // Render screenshot tags (multiple)\n    screenshots.forEach((shot, idx) => {\n      const tag = document.createElement('div');\n      const key = `ss-${shot.id}`;\n      const isInserted = isTagInserted('screenshot', key);\n\n      tag.className = `context-tag${isInserted ? ' inserted' : ''}`;\n      tag.innerHTML = `\n        <span class=\"tag-label\" data-type=\"screenshot\" data-index=\"${key}\">Screenshot ${idx + 1}</span>\n        <span class=\"tag-remove\" data-type=\"screenshot\" data-id=\"${shot.id}\">×</span>\n      `;\n      this.container.appendChild(tag);\n    });\n\n    // Add event listeners and sync inserted state\n    this.attachListeners();\n    this.updateInsertedStates();\n  }\n\n  attachListeners() {\n    if (!this.container) return;\n    \n    // Remove buttons\n    this.container.querySelectorAll('.tag-remove').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        const type = e.target.dataset.type;\n        const index = e.target.dataset.index;\n        \n        if (type === 'element') {\n          this.removeElement(parseInt(index));\n        } else if (type === 'screenshot') {\n          const id = e.target.dataset.id ? parseInt(e.target.dataset.id) : null;\n          this.removeScreenshot(id);\n        }\n      });\n    });\n    \n    // Label click to insert inline chip\n    this.container.querySelectorAll('.tag-label').forEach(label => {\n      // Prevent focus change so the input caret stays intact\n      label.addEventListener('pointerdown', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        // Snapshot caret before input blurs (pointerdown fires before blur/click)\n        const input = this.shadowRoot.getElementById('intent-input');\n        if (!input) return;\n        const sel = this._getSelection();\n        if (sel && sel.rangeCount > 0 && input.contains(sel.anchorNode)) {\n          this.lastIntentRange = sel.getRangeAt(0).cloneRange();\n          // Also drop a temporary marker so we can recover exact spot even if focus shifts\n          this._placeCaretMarker(this.lastIntentRange);\n        }\n        // If no stored range and no live selection inside input, seed to end of input\n        if (!this.lastIntentRange) {\n          const seeded = document.createRange();\n          seeded.selectNodeContents(input);\n          seeded.collapse(false);\n          this.lastIntentRange = seeded.cloneRange();\n        }\n\n        // Perform insertion immediately on pointerdown to avoid any post-up focus/selection changes\n        const type = e.currentTarget.dataset.type;\n        if (type === 'screenshot') {\n          this._pointerInserted = true;\n          const key = e.currentTarget.dataset.index;\n          this.insertInlineTag(e.currentTarget.textContent, key);\n        } else {\n          const idx = parseInt(e.currentTarget.dataset.index);\n          const elements = this.stateManager.get('selection.elements');\n          if (elements[idx]) {\n            this._pointerInserted = true;\n            this.insertInlineTag(readableElementName(elements[idx].element), idx);\n          }\n        }\n      });\n      label.addEventListener('mousedown', (e) => {\n        // Some environments dispatch only mouse events; prevent default to avoid focus steal\n        e.preventDefault();\n      });\n\n      label.addEventListener('click', (e) => {\n        // If we already handled pointerdown insertion, ignore the click\n        if (this._pointerInserted) {\n          this._pointerInserted = false;\n          e.preventDefault();\n          return;\n        }\n        e.preventDefault();\n        const type = e.currentTarget.dataset.type;\n        \n        if (type === 'screenshot') {\n          const key = e.currentTarget.dataset.index;\n          this.insertInlineTag(e.currentTarget.textContent, key);\n        } else {\n          const idx = parseInt(e.currentTarget.dataset.index);\n          const elements = this.stateManager.get('selection.elements');\n          if (elements[idx]) {\n            this.insertInlineTag(readableElementName(elements[idx].element), idx);\n          }\n        }\n      });\n    });\n  }\n\n  insertInlineTag(label, index) {\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (!input) return;\n\n    // Check if tag is already inserted (prevent duplicates)\n    const existingTag = input.querySelector(`.inline-element-tag[data-index=\"${String(index)}\"]`);\n    if (existingTag) {\n      // Tag already exists, just focus it and scroll into view\n      existingTag.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      input.focus();\n      return;\n    }\n\n    // Choose the best available caret: prefer explicit marker, then live selection, then cached range\n    const selection = this._getSelection();\n    let workingRange = null;\n\n    // If input isn't focused or selection isn't in input, try to restore the last known caret first\n    const shadowActive = this.shadowRoot.activeElement;\n    if ((!shadowActive || shadowActive !== input) && this.lastIntentRange) {\n      try {\n        selection.removeAllRanges();\n        selection.addRange(this.lastIntentRange.cloneRange());\n      } catch (_) {}\n    }\n    const marker = input.querySelector(`[${this.CARET_MARK_ATTR}=\"1\"]`);\n    if (marker) {\n      workingRange = document.createRange();\n      workingRange.setStartBefore(marker);\n      workingRange.collapse(true);\n      // Clean up marker immediately\n      marker.remove();\n    }\n    if (!workingRange && selection && selection.rangeCount > 0 && input.contains(selection.anchorNode)) {\n      workingRange = selection.getRangeAt(0).cloneRange();\n    } else if (!workingRange && this.lastIntentRange) {\n      workingRange = this.lastIntentRange.cloneRange();\n    }\n\n    input.focus();\n    if (workingRange) {\n      selection.removeAllRanges();\n      selection.addRange(workingRange);\n    }\n\n    const range = workingRange || (() => {\n      // Fallback: find better insertion point than just end of input\n      const fallbackRange = document.createRange();\n\n      // If there's existing content, find the logical insertion point\n      const walker = document.createTreeWalker(input, NodeFilter.SHOW_TEXT, null);\n      let lastTextNode = null;\n      let textNode;\n\n      while (textNode = walker.nextNode()) {\n        lastTextNode = textNode;\n      }\n\n      if (lastTextNode && lastTextNode.textContent.trim()) {\n        // Insert at end of last meaningful text content\n        fallbackRange.setStart(lastTextNode, lastTextNode.textContent.length);\n        fallbackRange.setEnd(lastTextNode, lastTextNode.textContent.length);\n      } else {\n        // Empty or only tags - insert at end of input\n        fallbackRange.selectNodeContents(input);\n        fallbackRange.collapse(false);\n      }\n\n      return fallbackRange;\n    })();\n    \n    const tag = document.createElement('span');\n    tag.className = 'inline-element-tag';\n    tag.dataset.index = String(index);\n    tag.textContent = label;\n    tag.setAttribute('contenteditable', 'false');\n\n    const remove = document.createElement('span');\n    remove.className = 'inline-tag-remove';\n    remove.textContent = '×';\n    remove.addEventListener('click', (e) => {\n      e.stopPropagation();\n      tag.remove();\n      this.eventBus.emit('input:changed');\n      this.updateInsertedStates();\n    });\n    tag.appendChild(remove);\n\n    // Normalize whitespace: remove trailing spaces before insertion\n    if (range.startContainer.nodeType === 3 && /\\s$/.test(range.startContainer.textContent)) {\n      range.startContainer.textContent = range.startContainer.textContent.replace(/\\s+$/, ' ');\n    }\n\n    range.deleteContents();\n    range.insertNode(tag);\n    range.setStartAfter(tag);\n    range.collapse(true);\n\n    // Insert trailing space for easier deletion (simplified logic)\n    const space = document.createTextNode(' ');\n    range.insertNode(space);\n    range.setStartAfter(space);\n    range.collapse(true);\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n    // Persist the latest caret position for the next interaction\n    this.lastIntentRange = range.cloneRange();\n    this.eventBus.emit('input:changed');\n    this.updateInsertedStates();\n  }\n\n  _placeCaretMarker(range) {\n    try {\n      if (!range) return;\n      // Remove any existing markers first\n      const input = this.shadowRoot.getElementById('intent-input');\n      if (!input) return;\n      input.querySelectorAll(`[${this.CARET_MARK_ATTR}]`).forEach(n => n.remove());\n\n      const marker = document.createElement('span');\n      marker.setAttribute(this.CARET_MARK_ATTR, '1');\n      // Invisible, zero footprint\n      marker.style.cssText = 'display:inline-block;width:0;height:0;overflow:hidden;opacity:0;pointer-events:none;';\n      // Use a ZWSP to ensure the node positions correctly in text nodes\n      marker.textContent = '\\u200b';\n      const collapsed = range.cloneRange();\n      collapsed.collapse(true);\n      collapsed.insertNode(marker);\n    } catch (_) {\n      // Best-effort; if marker fails we still rely on cached range\n    }\n  }\n\n  updateInsertedStates() {\n    if (!this.container) return;\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (!input) return;\n\n    this.container.querySelectorAll('.context-tag').forEach(tag => {\n      const label = tag.querySelector('.tag-label');\n      if (!label) return;\n      const index = label.dataset.index;\n      const selector = `.inline-element-tag[data-index=\"${String(index)}\"]`;\n      const inserted = !!input.querySelector(selector);\n      tag.classList.toggle('inserted', inserted);\n    });\n  }\n\n  _getSelection() {\n    try {\n      if (this.shadowRoot && typeof this.shadowRoot.getSelection === 'function') {\n        const sel = this.shadowRoot.getSelection();\n        if (sel) return sel;\n      }\n    } catch (_) {}\n    try {\n      return window.getSelection();\n    } catch (_) {\n      return null;\n    }\n  }\n\n  _rangeFromPoint(x, y, root) {\n    try {\n      let range = null;\n      // Prefer standard caretPositionFromPoint if available (gives node + offset)\n      const pos = (this.shadowRoot && typeof this.shadowRoot.caretPositionFromPoint === 'function')\n        ? this.shadowRoot.caretPositionFromPoint(x, y)\n        : (document.caretPositionFromPoint ? document.caretPositionFromPoint(x, y) : null);\n      if (pos && pos.offsetNode) {\n        range = document.createRange();\n        range.setStart(pos.offsetNode, pos.offset);\n        range.collapse(true);\n      }\n      if (!range) {\n        const r2 = (this.shadowRoot && typeof this.shadowRoot.caretRangeFromPoint === 'function')\n          ? this.shadowRoot.caretRangeFromPoint(x, y)\n          : (document.caretRangeFromPoint ? document.caretRangeFromPoint(x, y) : null);\n        if (r2) {\n          range = r2;\n        }\n      }\n      if (range && root && !root.contains(range.startContainer)) {\n        // If the calculated range is not within the input, ignore it\n        return null;\n      }\n      return range;\n    } catch (_) {\n      return null;\n    }\n  }\n\n  removeElement(index) {\n    const elements = this.stateManager.get('selection.elements');\n    elements.splice(index, 1);\n    this.stateManager.set('selection.elements', elements);\n\n    // Remove corresponding inline chips and update indices for remaining elements\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (input) {\n      // Remove the specific inline tag for this element\n      input.querySelectorAll(`.inline-element-tag[data-index=\"${String(index)}\"]`).forEach(node => {\n        this.cleanupWhitespaceAroundNode(node);\n        node.remove();\n      });\n\n      // Update indices for all subsequent inline tags (critical fix)\n      input.querySelectorAll('.inline-element-tag').forEach(tag => {\n        const currentIndex = parseInt(tag.dataset.index);\n        if (currentIndex > index) {\n          tag.dataset.index = String(currentIndex - 1);\n        }\n      });\n    }\n\n    this.eventBus.emit('element:removed', index);\n    this.render();\n  }\n\n  removeScreenshot(id) {\n    const list = (this.stateManager.get('selection.screenshots') || []).slice();\n    const idx = list.findIndex(s => s.id === id);\n    if (idx >= 0) list.splice(idx, 1);\n    this.stateManager.set('selection.screenshots', list);\n    \n    // Remove corresponding inline chips\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (input) {\n      input.querySelectorAll(`.inline-element-tag[data-index=\"ss-${id}\"]`).forEach(node => {\n        this.cleanupWhitespaceAroundNode(node);\n        node.remove();\n      });\n    }\n    \n    this.eventBus.emit('screenshot:removed');\n    this.render();\n  }\n\n  cleanupWhitespaceAroundNode(node) {\n    const prev = node.previousSibling;\n    const next = node.nextSibling;\n    \n    if (next && next.nodeType === 3 && next.textContent.startsWith(' ')) {\n      next.textContent = next.textContent.slice(1);\n    } else if (prev && prev.nodeType === 3 && /\\s$/.test(prev.textContent)) {\n      prev.textContent = prev.textContent.replace(/\\s$/, '');\n    }\n  }\n\n  clear() {\n    this.stateManager.batch({\n      'selection.elements': [],\n      'selection.screenshots': []\n    });\n\n    const input = this.shadowRoot.getElementById('intent-input');\n    if (input) {\n      // Remove all inline tags and clear the input\n      input.querySelectorAll('.inline-element-tag').forEach(tag => {\n        tag.remove();\n      });\n      input.textContent = '';\n    }\n\n    this.render();\n  }\n}\n","/**\n * HighlightManager - Unified management of all page highlights\n */\n\nexport default class HighlightManager {\n  constructor() {\n    this.hoverHighlight = null;\n    this.selectionHighlights = [];\n    this.screenshotOverlay = null;\n  }\n\n  /**\n   * Show hover highlight for element\n   */\n  showHover(element) {\n    this.hideHover();\n    \n    const bbox = element.getBoundingClientRect();\n    const highlight = document.createElement('div');\n    highlight.className = 'lumi-highlight lumi-hover';\n    highlight.style.cssText = `\n      position: absolute;\n      top: ${bbox.top + window.scrollY}px;\n      left: ${bbox.left + window.scrollX}px;\n      width: ${bbox.width}px;\n      height: ${bbox.height}px;\n      background: rgba(59, 130, 246, 0.1);\n      border: 2px solid #3b82f6;\n      pointer-events: none;\n      z-index: 2147483645;\n      border-radius: 2px;\n      animation: fadeIn 0.15s;\n    `;\n    \n    document.body.appendChild(highlight);\n    this.hoverHighlight = highlight;\n  }\n\n  /**\n   * Hide hover highlight\n   */\n  hideHover() {\n    if (this.hoverHighlight) {\n      this.hoverHighlight.remove();\n      this.hoverHighlight = null;\n    }\n  }\n\n  /**\n   * Add selection highlight for element\n   */\n  addSelection(element) {\n    const bbox = element.getBoundingClientRect();\n    const highlight = document.createElement('div');\n    highlight.className = 'lumi-highlight lumi-selected';\n    highlight.style.cssText = `\n      position: absolute;\n      top: ${bbox.top + window.scrollY}px;\n      left: ${bbox.left + window.scrollX}px;\n      width: ${bbox.width}px;\n      height: ${bbox.height}px;\n      background: rgba(16, 185, 129, 0.15);\n      border: 2px solid #10b981;\n      pointer-events: none;\n      z-index: 2147483645;\n      border-radius: 2px;\n      animation: scaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);\n    `;\n    \n    // Add label\n    const label = document.createElement('div');\n    label.style.cssText = `\n      position: absolute;\n      top: -24px;\n      left: 0;\n      padding: 4px 8px;\n      background: #10b981;\n      color: white;\n      font-size: 11px;\n      font-weight: 500;\n      border-radius: 4px;\n      white-space: nowrap;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n    label.textContent = element.tagName.toLowerCase() + (element.className ? '.' + element.className.split(' ')[0] : '');\n    highlight.appendChild(label);\n    \n    document.body.appendChild(highlight);\n    this.selectionHighlights.push(highlight);\n    \n    return this.selectionHighlights.length - 1;\n  }\n\n  /**\n   * Remove selection highlight by index\n   */\n  removeSelection(index) {\n    if (this.selectionHighlights[index]) {\n      this.selectionHighlights[index].remove();\n      this.selectionHighlights.splice(index, 1);\n    }\n  }\n\n  /**\n   * Clear all selection highlights\n   */\n  clearAllSelections() {\n    this.selectionHighlights.forEach(h => h.remove());\n    this.selectionHighlights = [];\n  }\n\n  /**\n   * Show screenshot overlay\n   */\n  showScreenshotOverlay(bbox) {\n    this.hideScreenshotOverlay();\n    \n    const overlay = document.createElement('div');\n    overlay.className = 'lumi-screenshot-overlay';\n    overlay.style.cssText = `\n      position: absolute;\n      left: ${bbox.left}px;\n      top: ${bbox.top}px;\n      width: ${bbox.width}px;\n      height: ${bbox.height}px;\n      border: 2px dashed #3b82f6;\n      background: rgba(59, 130, 246, 0.1);\n      pointer-events: none;\n      z-index: 2147483645;\n    `;\n    \n    document.body.appendChild(overlay);\n    this.screenshotOverlay = overlay;\n  }\n\n  /**\n   * Update screenshot overlay dimensions\n   */\n  updateScreenshotOverlay(bbox) {\n    if (!this.screenshotOverlay) {\n      this.showScreenshotOverlay(bbox);\n      return;\n    }\n    \n    this.screenshotOverlay.style.left = bbox.left + 'px';\n    this.screenshotOverlay.style.top = bbox.top + 'px';\n    this.screenshotOverlay.style.width = bbox.width + 'px';\n    this.screenshotOverlay.style.height = bbox.height + 'px';\n  }\n\n  /**\n   * Hide screenshot overlay\n   */\n  hideScreenshotOverlay() {\n    if (this.screenshotOverlay) {\n      this.screenshotOverlay.remove();\n      this.screenshotOverlay = null;\n    }\n  }\n\n  /**\n   * Clear all highlights\n   */\n  clearAll() {\n    this.hideHover();\n    this.clearAllSelections();\n    this.hideScreenshotOverlay();\n  }\n}\n\n","/**\n * ElementSelector - Handle element selection mode\n */\n\nimport { shouldIgnoreElement, getElementSelector } from '../utils/dom.js';\n\nexport default class ElementSelector {\n  constructor(eventBus, stateManager, highlightManager, topBanner) {\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.highlightManager = highlightManager;\n    this.topBanner = topBanner;\n    this.isActive = false;\n    \n    // Bind methods\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  activate() {\n    if (this.isActive) return;\n    \n    this.isActive = true;\n    this.stateManager.set('ui.mode', 'element');\n    \n    this.topBanner.update('Click to select element');\n    \n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('click', this.handleClick, true);\n    document.documentElement.classList.add('lumi-element-cursor');\n    document.body.classList.add('lumi-element-cursor');\n    \n    this.eventBus.emit('element-mode:activated');\n  }\n\n  deactivate() {\n    if (!this.isActive) return;\n    \n    this.isActive = false;\n    this.stateManager.set('ui.mode', 'idle');\n    \n    this.topBanner.hide();\n    this.highlightManager.hideHover();\n    \n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('click', this.handleClick, true);\n    document.documentElement.classList.remove('lumi-element-cursor');\n    document.body.classList.remove('lumi-element-cursor');\n    \n    this.eventBus.emit('element-mode:deactivated');\n  }\n\n  handleMouseMove(e) {\n    if (!this.isActive || shouldIgnoreElement(e.target)) return;\n    \n    const hoveredElement = this.stateManager.get('selection.hoveredElement');\n    if (hoveredElement !== e.target) {\n      this.stateManager.set('selection.hoveredElement', e.target);\n      this.highlightManager.showHover(e.target);\n    }\n  }\n\n  handleClick(e) {\n    if (!this.isActive || shouldIgnoreElement(e.target)) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    // UX: element mode is additive by default\n    const element = e.target;\n    this.addElement(element);\n  }\n\n  addElement(element) {\n    const elements = this.stateManager.get('selection.elements');\n    \n    // Check if already selected\n    const exists = elements.some(item => item.element === element);\n    if (exists) return;\n    \n    const selector = getElementSelector(element);\n    const bbox = element.getBoundingClientRect();\n    \n    const item = {\n      element,\n      selector,\n      tagName: element.tagName.toLowerCase(),\n      bbox: {\n        top: bbox.top + window.scrollY,\n        left: bbox.left + window.scrollX,\n        width: bbox.width,\n        height: bbox.height\n      }\n    };\n    \n    const updated = [...elements, item];\n    this.stateManager.set('selection.elements', updated);\n\n    this.highlightManager.addSelection(element);\n    this.eventBus.emit('element:selected', item);\n  }\n\n  clearSelections() {\n    this.stateManager.set('selection.elements', []);\n    this.highlightManager.clearAllSelections();\n    this.eventBus.emit('selections:cleared');\n  }\n}\n","/**\n * ScreenshotSelector - Handle screenshot selection mode\n */\n\nexport default class ScreenshotSelector {\n  constructor(eventBus, stateManager, highlightManager, topBanner, chromeBridge) {\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.highlightManager = highlightManager;\n    this.topBanner = topBanner;\n    this.chromeBridge = chromeBridge;\n    this.isActive = false;\n    this.screenshotStart = null;\n    this.overlay = null;\n    \n    // Bind methods\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n  }\n\n  activate() {\n    if (this.isActive) return;\n    \n    this.isActive = true;\n    this.stateManager.set('ui.mode', 'screenshot');\n    \n    this.topBanner.update('Drag to select area for screenshot');\n    \n    this._createOverlay();\n    if (this.overlay) {\n      this.overlay.addEventListener('mousedown', this.handleMouseDown, true);\n    } else {\n      // Fallback: keep old behavior if overlay creation fails\n      document.addEventListener('mousedown', this.handleMouseDown, true);\n    }\n    document.documentElement.classList.add('lumi-screenshot-cursor');\n    document.body.classList.add('lumi-screenshot-cursor');\n    \n    this.eventBus.emit('screenshot-mode:activated');\n  }\n\n  deactivate() {\n    if (!this.isActive) return;\n    \n    this.isActive = false;\n    this.stateManager.set('ui.mode', 'idle');\n    \n    this.topBanner.hide();\n    this.highlightManager.hideScreenshotOverlay();\n    \n    if (this.overlay) {\n      this.overlay.removeEventListener('mousedown', this.handleMouseDown, true);\n      this.overlay.remove();\n      this.overlay = null;\n    } else {\n      document.removeEventListener('mousedown', this.handleMouseDown, true);\n    }\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.documentElement.classList.remove('lumi-screenshot-cursor');\n    document.body.classList.remove('lumi-screenshot-cursor');\n    \n    this.eventBus.emit('screenshot-mode:deactivated');\n  }\n\n  handleMouseDown(e) {\n    if (!this.isActive) return;\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.screenshotStart = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    \n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n  }\n\n  handleMouseMove(e) {\n    if (!this.screenshotStart) return;\n    \n    const current = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    \n    const bbox = {\n      left: Math.min(this.screenshotStart.x, current.x) + window.scrollX,\n      top: Math.min(this.screenshotStart.y, current.y) + window.scrollY,\n      width: Math.abs(current.x - this.screenshotStart.x),\n      height: Math.abs(current.y - this.screenshotStart.y)\n    };\n    \n    this.highlightManager.updateScreenshotOverlay(bbox);\n  }\n\n  handleMouseUp(e) {\n    if (!this.screenshotStart) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const end = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    \n    const bbox = {\n      left: Math.min(this.screenshotStart.x, end.x) + window.scrollX,\n      top: Math.min(this.screenshotStart.y, end.y) + window.scrollY,\n      width: Math.abs(end.x - this.screenshotStart.x),\n      height: Math.abs(end.y - this.screenshotStart.y)\n    };\n    \n    // Minimum size check\n    if (bbox.width > 20 && bbox.height > 20) {\n      this.captureScreenshot(bbox);\n    }\n    \n    this.highlightManager.hideScreenshotOverlay();\n    this.screenshotStart = null;\n    \n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    \n    this.deactivate();\n  }\n\n  async captureScreenshot(bbox) {\n    try {\n      const dataUrl = await this.chromeBridge.captureScreenshot();\n      \n      // Support accumulating screenshots; prefer array if present\n      const existing = this.stateManager.get('selection.screenshots');\n      const next = Array.isArray(existing) ? existing.slice() : [];\n      next.push({ dataUrl, bbox, id: Date.now() });\n      this.stateManager.set('selection.screenshots', next);\n      \n      this.eventBus.emit('screenshot:captured', { dataUrl, bbox });\n    } catch (error) {\n      console.error('[ScreenshotSelector] Failed to capture:', error);\n      this.eventBus.emit('screenshot:error', error);\n    }\n  }\n\n  _createOverlay() {\n    try {\n      const overlay = document.createElement('div');\n      overlay.className = 'lumi-screenshot-mask';\n      overlay.style.cssText = `\n        position: fixed;\n        inset: 0;\n        z-index: 2147483645;\n        cursor: crosshair;\n        background: transparent;\n      `;\n      const suppress = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n      };\n      ['click', 'contextmenu', 'auxclick'].forEach(evt => {\n        overlay.addEventListener(evt, suppress, true);\n      });\n      document.body.appendChild(overlay);\n      this.overlay = overlay;\n    } catch (error) {\n      console.error('[ScreenshotSelector] Failed to create overlay:', error);\n      this.overlay = null;\n    }\n  }\n}\n","/**\n * EngineManager - Manage AI engine selection and availability\n * Fixes: Engine selection being overwritten by health check\n */\n\nexport default class EngineManager {\n  constructor(eventBus, stateManager, chromeBridge) {\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.chromeBridge = chromeBridge;\n  }\n\n  async init() {\n    console.log('[EngineManager] Initializing...');\n    \n    // Load saved engine preference\n    const stored = await this.chromeBridge.storageGet(['engine']);\n    console.log('[EngineManager] Stored engine:', stored.engine);\n    \n    if (stored.engine && (stored.engine === 'codex' || stored.engine === 'claude')) {\n      console.log('[EngineManager] Restoring saved engine:', stored.engine);\n      this.selectEngine(stored.engine, true); // silent = true, no save\n      this.stateManager.set('engine.restored', true);\n    } else {\n      console.log('[EngineManager] No saved engine, using default: codex');\n      this.stateManager.set('engine.restored', true);\n    }\n    \n    const currentEngine = this.stateManager.get('engine.current');\n    console.log('[EngineManager] Initialized with engine:', currentEngine);\n    this.eventBus.emit('engine:initialized', currentEngine);\n  }\n\n  selectEngine(engine, silent = false) {\n    if (engine !== 'codex' && engine !== 'claude') {\n      console.error('[EngineManager] Invalid engine:', engine);\n      return;\n    }\n    \n    console.log('[EngineManager] Selecting engine:', engine, 'silent:', silent);\n    this.stateManager.set('engine.current', engine);\n    \n    // Persist to storage\n    if (!silent) {\n      console.log('[EngineManager] Saving engine to storage:', engine);\n      this.chromeBridge.storageSet({ engine });\n    }\n    \n    this.eventBus.emit('engine:selected', engine);\n  }\n\n  updateAvailability(codex, claude) {\n    // Only update availability if engine has been restored from storage\n    // This prevents health check from overwriting user selection during initialization\n    const restored = this.stateManager.get('engine.restored');\n\n    console.log('[EngineManager] updateAvailability called:', { codex, claude, restored });\n\n    if (!restored) {\n      console.log('[EngineManager] Still initializing, skipping availability update');\n      return;\n    }\n\n    const previous = this.stateManager.get('engine.available') || {};\n    const next = {\n      codex: !!codex,\n      claude: !!claude\n    };\n\n    if (previous.codex === next.codex && previous.claude === next.claude) {\n      console.log('[EngineManager] Availability unchanged, skipping state update');\n      return;\n    }\n\n    this.stateManager.batch({\n      'engine.available.codex': next.codex,\n      'engine.available.claude': next.claude\n    });\n\n    console.log('[EngineManager] Engine availability updated:', next);\n    this.eventBus.emit('engine:availability-updated', next);\n  }\n\n  getCurrentEngine() {\n    return this.stateManager.get('engine.current');\n  }\n\n  getAvailableEngines() {\n    return this.stateManager.get('engine.available');\n  }\n\n  isEngineAvailable(engine) {\n    const available = this.getAvailableEngines();\n    return !!available[engine];\n  }\n}\n","/**\n * HealthChecker - Periodic server health checks\n * Detects CLI availability and updates engine status\n */\n\nexport default class HealthChecker {\n  constructor(eventBus, stateManager, chromeBridge, engineManager) {\n    this.eventBus = eventBus;\n    this.stateManager = stateManager;\n    this.chromeBridge = chromeBridge;\n    this.engineManager = engineManager;\n    this.intervalId = null;\n    this.isRunning = false;\n  }\n\n  start(interval = 10000) {\n    if (this.isRunning) return;\n    \n    this.isRunning = true;\n    \n    // Initial check\n    this.checkOnce();\n    \n    // Periodic checks\n    this.intervalId = setInterval(() => {\n      this.checkOnce();\n    }, interval);\n    \n    this.eventBus.emit('health-checker:started');\n  }\n\n  stop() {\n    if (!this.isRunning) return;\n    \n    this.isRunning = false;\n    \n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n    \n    this.eventBus.emit('health-checker:stopped');\n  }\n\n  async checkOnce() {\n    try {\n      const result = await this.chromeBridge.checkServerHealth();\n\n      this.stateManager.set('engine.serverHealthy', result.healthy);\n\n      // Server /health returns { status, version, uptime, config: { workingDirectory, cliCapabilities } }\n      // Background forwards it as { healthy, config: <that object> }\n      // Support both shapes defensively.\n      const rawConfig = result?.config || null;\n      const capsContainer = rawConfig?.cliCapabilities ? rawConfig : rawConfig?.config;\n      const caps = capsContainer?.cliCapabilities || null;\n      const projects = Array.isArray(rawConfig?.projects)\n        ? rawConfig.projects\n        : Array.isArray(rawConfig?.config?.projects)\n          ? rawConfig.config.projects\n          : [];\n      const host = window.location?.host || '';\n      const projectMatch = resolveProject(projects, window.location?.href);\n      const projectAllowed = projects.length === 0 || !!projectMatch?.project;\n\n      this.stateManager.batch({\n        'projects.allowed': projectAllowed,\n        'projects.current': projectMatch?.project || null,\n        'projects.list': projects\n      });\n\n      if (!projectAllowed) {\n        this.eventBus.emit('projects:blocked', {\n          host,\n          projects\n        });\n      } else {\n        this.eventBus.emit('projects:allowed', {\n          host,\n          project: projectMatch?.project || null\n        });\n      }\n\n      if (result.healthy && caps) {\n        const codexAvailable = !!(caps.codex && caps.codex.available);\n        const claudeAvailable = !!(caps.claude && caps.claude.available);\n\n        // Update engine availability through EngineManager (respects init state)\n        this.engineManager.updateAvailability(codexAvailable, claudeAvailable);\n      } else if (result.healthy) {\n        // Server healthy but no specific capabilities, assume codex available\n        this.engineManager.updateAvailability(true, false);\n      } else {\n        // Server not healthy\n        this.engineManager.updateAvailability(false, false);\n      }\n\n      this.eventBus.emit('health-check:completed', {\n        healthy: result.healthy,\n        config: result.config\n      });\n    } catch (error) {\n      console.error('[HealthChecker] Check failed:', error);\n      this.stateManager.set('engine.serverHealthy', false);\n      this.engineManager.updateAvailability(false, false);\n      \n      this.eventBus.emit('health-check:error', error);\n      this.stateManager.batch({\n        'projects.allowed': false,\n        'projects.current': null\n      });\n    }\n  }\n}\n\nfunction escapeRegex(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction hostMatches(pattern, host) {\n  if (!pattern || !host) return false;\n  const normalizedPattern = pattern.trim().toLowerCase();\n  const normalizedHost = host.trim().toLowerCase();\n  if (!normalizedPattern.includes('*')) {\n    return normalizedPattern === normalizedHost;\n  }\n  const regex = new RegExp('^' + normalizedPattern.split('*').map(escapeRegex).join('.*') + '$');\n  return regex.test(normalizedHost);\n}\n\nfunction resolveProject(projects, pageUrl) {\n  if (!Array.isArray(projects) || projects.length === 0) {\n    return { project: null };\n  }\n\n  try {\n    const url = new URL(pageUrl);\n    const host = url.host.toLowerCase();\n    let best = null;\n    let bestScore = -Infinity;\n    for (const project of projects) {\n      if (!project || project.enabled === false) continue;\n      const hosts = Array.isArray(project.hosts) ? project.hosts : [];\n      for (const pattern of hosts) {\n        if (!hostMatches(pattern, host)) continue;\n        const normalized = String(pattern).trim().toLowerCase();\n        const wildcards = (normalized.match(/\\*/g) || []).length;\n        const nonWildcardLen = normalized.replace(/\\*/g, '').length;\n        const exact = normalized === host ? 1 : 0;\n        const score = exact * 10000 + nonWildcardLen - wildcards * 10;\n        if (score > bestScore) {\n          bestScore = score;\n          best = project;\n        }\n      }\n    }\n    return { project: best };\n  } catch (error) {\n    return { project: null };\n  }\n}\n","/**\n * ChromeBridge - Abstraction layer for Chrome extension APIs\n * Provides safe wrappers for all Chrome API calls\n */\n\nexport default class ChromeBridge {\n  constructor(eventBus) {\n    this.eventBus = eventBus;\n    this.runtimeWarningEmitted = false;\n    this.loggedErrors = new Set();\n    this.contextInvalidatedWarned = false;\n    this.recentRuntimeFailure = false;\n    this.runtimeInvalidated = false;\n  }\n\n  /**\n   * Check if runtime APIs are available\n   */\n  isRuntimeAvailable() {\n    return !this.runtimeInvalidated &&\n      typeof chrome !== 'undefined' &&\n      !!chrome.runtime &&\n      typeof chrome.runtime.sendMessage === 'function';\n  }\n\n  /**\n   * Check if storage APIs are available\n   */\n  isStorageAvailable() {\n    return this.isRuntimeAvailable() && typeof chrome.storage !== 'undefined' && !!chrome.storage.local;\n  }\n\n  /**\n   * Send message to background script (safe wrapper)\n   */\n  sendMessage(message, callback) {\n    try {\n      if (this.runtimeInvalidated) {\n        if (callback) callback(undefined);\n        return;\n      }\n      if (!this.isRuntimeAvailable()) {\n        if (!this.runtimeWarningEmitted) {\n          console.warn('[ChromeBridge] Chrome runtime not available');\n          this.runtimeWarningEmitted = true;\n        }\n        this.recentRuntimeFailure = true;\n        if (callback) callback(undefined);\n        return;\n      }\n      chrome.runtime.sendMessage(message, (response) => {\n        const lastError = chrome.runtime.lastError;\n        if (lastError) {\n          if (!this.loggedErrors.has(lastError.message)) {\n            console.warn('[ChromeBridge] Message failed:', lastError.message, message?.type || message);\n            this.loggedErrors.add(lastError.message);\n          }\n          this.recentRuntimeFailure = true;\n          if (callback) callback(undefined);\n          return;\n        }\n        this.recentRuntimeFailure = false;\n        if (callback) callback(response);\n      });\n    } catch (err) {\n      this.handleRuntimeError(err);\n      if (callback) callback(undefined);\n    }\n  }\n\n  /**\n   * Capture screenshot of visible tab\n   */\n  captureScreenshot() {\n    return new Promise((resolve, reject) => {\n      this.sendMessage({ type: 'CAPTURE_SCREENSHOT' }, (response) => {\n        if (response && response.dataUrl) {\n          resolve(response.dataUrl);\n        } else {\n          reject(new Error(response?.error || 'Screenshot capture failed'));\n        }\n      });\n    });\n  }\n\n  /**\n   * Check server health\n   */\n  checkServerHealth() {\n    return new Promise((resolve) => {\n      this.sendMessage({ type: 'CHECK_SERVER' }, (response) => {\n        resolve({\n          healthy: response?.healthy || false,\n          config: response?.config || null\n        });\n      });\n    });\n  }\n\n  /**\n   * Send execution request to server\n   */\n  executeOnServer(engine, context, screenshot = null) {\n    return new Promise((resolve, reject) => {\n      this.sendMessage({\n        type: 'SEND_TO_SERVER',\n        payload: { engine, context, screenshot }\n      }, (response) => {\n        if (response && response.error) {\n          reject(new Error(response.error));\n        } else {\n          resolve(response);\n        }\n      });\n    });\n  }\n\n  /**\n   * Get from storage\n   */\n  storageGet(keys) {\n    return new Promise((resolve) => {\n      if (!this.isStorageAvailable()) {\n        console.warn('[ChromeBridge] Storage API not available, returning empty object');\n        resolve({});\n        return;\n      }\n\n      try {\n        chrome.storage.local.get(keys, (result) => {\n          resolve(result || {});\n        });\n      } catch (error) {\n        console.warn('[ChromeBridge] Failed to read storage:', error);\n        resolve({});\n      }\n    });\n  }\n\n  /**\n   * Set to storage\n   */\n  storageSet(items) {\n    return new Promise((resolve) => {\n      if (!this.isStorageAvailable()) {\n        console.warn('[ChromeBridge] Storage API not available, skipping write');\n        resolve();\n        return;\n      }\n\n      try {\n        chrome.storage.local.set(items, () => {\n          resolve();\n        });\n      } catch (error) {\n        console.warn('[ChromeBridge] Failed to write storage:', error);\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * Listen for messages from background\n   */\n  onMessage(callback) {\n    if (!this.isRuntimeAvailable()) {\n      console.warn('[ChromeBridge] Cannot register runtime listener; runtime unavailable');\n      return;\n    }\n\n    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n      let result;\n      try {\n        result = callback(message, sender, sendResponse);\n      } catch (error) {\n        console.error('[ChromeBridge] onMessage handler error:', error);\n      }\n\n      // If the handler explicitly returns true we respect it; otherwise we only return true\n      // when we know a previous runtime call failed, so Chrome keeps the channel open for the retry.\n      if (result === true) {\n        return true;\n      }\n\n      return this.recentRuntimeFailure;\n    });\n  }\n\n  handleRuntimeError(err) {\n    if (!err || typeof err.message !== 'string') {\n      console.warn('[ChromeBridge] Runtime context error:', err);\n      return;\n    }\n\n    if (err.message.includes('Extension context invalidated')) {\n      this.runtimeInvalidated = true;\n      if (!this.contextInvalidatedWarned) {\n        console.debug('[ChromeBridge] Extension context invalidated (page reload or extension restart).');\n        this.contextInvalidatedWarned = true;\n      }\n      return;\n    }\n\n    console.warn('[ChromeBridge] Runtime context invalidated:', err.message);\n  }\n}\n","/**\n * ServerClient - Handle server communication\n */\n\nimport { getComputedStyleSummary } from '../utils/dom.js';\n\nexport default class ServerClient {\n  constructor(chromeBridge) {\n    this.chromeBridge = chromeBridge;\n  }\n\n  async execute(engine, intent, elements, screenshot, pageInfo, screenshots = []) {\n    const context = this.buildContext(intent, elements, screenshot, pageInfo, screenshots);\n    \n    try {\n      const result = await this.chromeBridge.executeOnServer(\n        engine,\n        context,\n        screenshot?.dataUrl\n      );\n      \n      return result;\n    } catch (error) {\n      console.error('[ServerClient] Execution failed:', error);\n      throw error;\n    }\n  }\n\n  buildContext(intent, elements, screenshot, pageInfo, screenshots = []) {\n    const context = {\n      intent,\n      pageUrl: pageInfo.url,\n      pageTitle: pageInfo.title,\n      selectionMode: elements.length > 0 ? 'element' : 'screenshot'\n    };\n    \n    // Add element context - support multiple elements\n    if (elements.length > 0) {\n      if (elements.length === 1) {\n        // Single element - keep original format\n        context.element = {\n          tagName: elements[0].element.tagName,\n          selector: elements[0].selector,\n          className: elements[0].element.className,\n          id: elements[0].element.id,\n          outerHTML: elements[0].element.outerHTML,\n          textContent: getElementText(elements[0].element),\n          computedStyle: getComputedStyleSummary(elements[0].element)\n        };\n        context.bbox = elements[0].bbox;\n      } else {\n        // Multiple elements - send as array\n        context.elements = elements.map((item, index) => ({\n          index: index + 1,\n          tagName: item.element.tagName,\n          selector: item.selector,\n          className: item.element.className,\n          id: item.element.id,\n          outerHTML: item.element.outerHTML,\n          textContent: getElementText(item.element),\n          computedStyle: getComputedStyleSummary(item.element),\n          bbox: item.bbox\n        }));\n        context.elementCount = elements.length;\n      }\n    }\n    \n    // Add screenshot context (single + multiple)\n    if (screenshots && screenshots.length > 0) {\n      context.screenshots = screenshots.map((s, i) => ({ index: i + 1, bbox: s.bbox }));\n    }\n    if (screenshot) {\n      context.screenshot = screenshot;\n    }\n    \n    return context;\n  }\n}\n\nfunction getElementText(element) {\n  if (!element) return '';\n  const text = (element.textContent || '').trim();\n  return text.length > 400 ? text.slice(0, 400) + '…' : text;\n}\n","/**\n * LUMI Content Script v3.1 - Modular Architecture\n * Main orchestrator for all modules\n */\n\n// Core\nimport EventBus from './lib/core/EventBus.js';\nimport StateManager from './lib/core/StateManager.js';\n\n// UI\nimport BubbleUI from './lib/ui/BubbleUI.js';\nimport TopBanner from './lib/ui/TopBanner.js';\nimport ContextTags from './lib/ui/ContextTags.js';\nimport { GLOBAL_STYLES } from './lib/ui/styles.js';\n\n// Selection\nimport HighlightManager from './lib/selection/HighlightManager.js';\nimport ElementSelector from './lib/selection/ElementSelector.js';\nimport ScreenshotSelector from './lib/selection/ScreenshotSelector.js';\n\n// Engine & Communication\nimport EngineManager from './lib/engine/EngineManager.js';\nimport HealthChecker from './lib/engine/HealthChecker.js';\nimport ChromeBridge from './lib/communication/ChromeBridge.js';\nimport ServerClient from './lib/communication/ServerClient.js';\n\nif (window.LUMI_INJECTED) {\n  console.warn('[LUMI] Content script already injected, skipping bootstrap');\n} else {\n  window.LUMI_INJECTED = true;\n  bootstrap();\n}\n\nfunction bootstrap() {\n  // Initialize core systems\n  const eventBus = new EventBus();\n  const stateManager = new StateManager(eventBus);\n  const chromeBridge = new ChromeBridge(eventBus);\n  const serverClient = new ServerClient(chromeBridge);\n\n  // If the script is accidentally loaded in page context (no runtime), bail out early\n  if (!chromeBridge.isRuntimeAvailable()) {\n    console.warn('[LUMI] Chrome runtime not available in this context; skipping init');\n    return;\n  }\n\n  // Initialize UI\n  const bubbleUI = new BubbleUI(eventBus, stateManager);\n  const topBanner = new TopBanner();\n  let contextTags = null;\n\n  // Initialize selection helpers (instantiated after UI mounts)\n  const highlightManager = new HighlightManager();\n  let elementSelector = null;\n  let screenshotSelector = null;\n\n  // Initialize engine & health\n  const engineManager = new EngineManager(eventBus, stateManager, chromeBridge);\n  const healthChecker = new HealthChecker(eventBus, stateManager, chromeBridge, engineManager);\n\n  // Inject global styles\n  function injectGlobalStyles() {\n    const style = document.createElement('style');\n    style.textContent = GLOBAL_STYLES;\n    document.head.appendChild(style);\n  }\n\n  // Event bindings\n  function bindEvents() {\n    function refreshElementHighlights() {\n      highlightManager.clearAllSelections();\n      const elements = stateManager.get('selection.elements');\n      elements.forEach(item => highlightManager.addSelection(item.element));\n    }\n\n    // Selection events\n    eventBus.on('element:selected', () => {\n      bubbleUI.updateSendButtonState();\n      if (contextTags) {\n        contextTags.render();\n      }\n    });\n\n    eventBus.on('element:removed', () => {\n      bubbleUI.updateSendButtonState();\n      refreshElementHighlights();\n      if (contextTags) {\n        contextTags.render();\n      }\n    });\n\n    eventBus.on('selection:clear', () => {\n      highlightManager.clearAll();\n      bubbleUI.updateSendButtonState();\n      if (contextTags) {\n        contextTags.render();\n      }\n    });\n\n    eventBus.on('screenshot:captured', () => {\n      bubbleUI.updateSendButtonState();\n      if (contextTags) {\n        contextTags.render();\n      }\n    });\n\n    eventBus.on('screenshot:removed', () => {\n      bubbleUI.updateSendButtonState();\n      if (contextTags) {\n        contextTags.render();\n      }\n    });\n\n    eventBus.on('screenshot:error', (error) => {\n      const message = error?.message || 'Screenshot capture failed';\n      bubbleUI.showStatus(message, 'error');\n    });\n\n    // Context tag click events\n    eventBus.on('context-tag:element-clicked', (index) => {\n      const elements = stateManager.get('selection.elements');\n      const item = elements[index];\n      if (item) {\n        item.element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        highlightManager.clearAll();\n        elements.forEach(entry => highlightManager.addSelection(entry.element));\n      }\n    });\n\n    // Mode toggle events\n    eventBus.on('mode:toggle-element', () => {\n      if (!elementSelector || !screenshotSelector) return;\n      const currentMode = stateManager.get('ui.mode');\n\n      if (currentMode === 'element') {\n        elementSelector.deactivate();\n      } else {\n        screenshotSelector.deactivate();\n        elementSelector.activate();\n      }\n    });\n\n    eventBus.on('mode:toggle-screenshot', () => {\n      if (!elementSelector || !screenshotSelector) return;\n      const currentMode = stateManager.get('ui.mode');\n\n      if (currentMode === 'screenshot') {\n        screenshotSelector.deactivate();\n      } else {\n        elementSelector.deactivate();\n        screenshotSelector.activate();\n      }\n    });\n\n    // Bubble events\n    eventBus.on('bubble:close', () => {\n      bubbleUI.hide();\n      if (elementSelector) elementSelector.deactivate();\n      if (screenshotSelector) screenshotSelector.deactivate();\n      highlightManager.clearAll();\n    });\n\n    eventBus.on('bubble:toggle', () => {\n      const isVisible = stateManager.get('ui.bubbleVisible');\n\n      if (isVisible) {\n        bubbleUI.hide();\n        if (elementSelector) elementSelector.deactivate();\n        if (screenshotSelector) screenshotSelector.deactivate();\n        highlightManager.clearAll();\n      } else {\n        bubbleUI.show();\n        if (elementSelector) elementSelector.activate(); // Auto-activate element mode\n      }\n    });\n\n    // Engine events\n    eventBus.on('engine:select', (engine) => {\n      console.log('[Content] Engine select requested:', engine);\n      if (!engineManager.isEngineAvailable(engine)) {\n        const message = engine === 'claude'\n          ? 'Claude CLI not detected. Please install Claude Code CLI to enable.'\n          : 'Codex CLI not detected. Please install Codex CLI to enable.';\n        bubbleUI.showStatus(message, 'error');\n        return;\n      }\n      // Switch engine and update UI immediately for responsiveness\n      engineManager.selectEngine(engine);\n      bubbleUI.updateEngineSelector(engine);\n    });\n\n    eventBus.on('engine:selected', (engine) => {\n      console.log('[Content] Engine selected, updating UI:', engine);\n      const shadow = bubbleUI.getShadowRoot();\n      if (shadow) {\n        bubbleUI.updateEngineSelector(engine);\n      }\n    });\n\n    eventBus.on('engine:availability-updated', ({ codex, claude }) => {\n      console.log('[Content] Engine availability event received:', { codex, claude });\n      bubbleUI.updateEngineAvailability({ codex, claude });\n      const current = engineManager.getCurrentEngine();\n      if (!engineManager.isEngineAvailable(current)) {\n        const fallback = codex ? 'codex' : claude ? 'claude' : null;\n        if (fallback && fallback !== current) {\n          console.log('[Content] Current engine unavailable, falling back to:', fallback);\n          engineManager.selectEngine(fallback);\n          const message = current === 'claude'\n            ? 'Claude CLI not detected. Switched back to Codex.'\n            : 'Codex CLI not detected. Switched back to Claude.';\n          bubbleUI.showStatus(message, 'error');\n        } else {\n          const message = current === 'claude'\n            ? 'Claude CLI not detected. Please install Claude Code CLI to enable.'\n            : 'Codex CLI not detected. Please install Codex CLI to enable.';\n          bubbleUI.showStatus(message, 'error');\n        }\n      }\n    });\n\n    // State subscription: Update UI when engine state changes\n    stateManager.subscribe('engine.current', (newEngine, oldEngine) => {\n      console.log('[Content] Engine state changed:', oldEngine, '->', newEngine);\n      const shadow = bubbleUI.getShadowRoot();\n      if (shadow) {\n        bubbleUI.updateEngineSelector(newEngine);\n      }\n    });\n\n    // Input events\n    eventBus.on('input:changed', () => {\n      bubbleUI.updateSendButtonState();\n      if (contextTags) contextTags.updateInsertedStates();\n    });\n\n    // Submit event\n    eventBus.on('submit:requested', async () => {\n      const intent = bubbleUI.getInputValue();\n      const elements = stateManager.get('selection.elements');\n      const screenshots = stateManager.get('selection.screenshots') || [];\n      const projectAllowed = stateManager.get('projects.allowed');\n\n      if (!intent || (elements.length === 0 && screenshots.length === 0)) {\n        bubbleUI.showStatus('Please select an element or capture a screenshot first', 'error');\n        return;\n      }\n\n      if (projectAllowed === false) {\n        const message = 'LUMI is not configured for this site. Open Settings to map it to a project before submitting.';\n        bubbleUI.showStatus(message, 'error');\n        eventBus.emit('notify:error', message);\n        return;\n      }\n\n    const engine = engineManager.getCurrentEngine();\n    if (!engineManager.isEngineAvailable(engine)) {\n      const message = engine === 'claude'\n        ? 'Claude CLI not detected. Please install Claude Code CLI to enable.'\n        : 'Codex CLI not detected. Please install Codex CLI to enable.';\n      bubbleUI.showStatus(message, 'error');\n      return;\n    }\n\n    stateManager.set('processing.active', true);\n    bubbleUI.setLoading(true, 'Analyzing...');\n\n    try {\n      console.log('[Content] Submitting with engine:', engine, 'elements:', elements.length);\n\n        const pageInfo = {\n          url: window.location.href,\n          title: document.title\n        };\n\n        const lastScreenshot = screenshots.length ? screenshots[screenshots.length - 1] : null;\n        const result = await serverClient.execute(\n          engine,\n          intent,\n          elements,\n          lastScreenshot,\n          pageInfo,\n          screenshots\n        );\n\n        if (result.success) {\n          bubbleUI.showStatus('Success! Changes applied.', 'success');\n          bubbleUI.clearInput();\n\n          // Clear selections after successful submission\n          stateManager.batch({\n            'selection.elements': [],\n            'selection.screenshots': []\n          });\n          if (contextTags) {\n            contextTags.render();\n          }\n          bubbleUI.updateSendButtonState();\n          highlightManager.clearAll();\n        } else {\n          bubbleUI.showStatus(result.error || 'Request failed', 'error');\n        }\n      } catch (error) {\n        console.error('[Content] Submit failed:', error);\n        bubbleUI.showStatus('Network error: ' + error.message, 'error');\n      } finally {\n        stateManager.set('processing.active', false);\n        bubbleUI.setLoading(false);\n      }\n    });\n\n    // Health check events\n    eventBus.on('health:server-status-changed', (isHealthy) => {\n      bubbleUI.updateServerStatus(isHealthy);\n    });\n\n    eventBus.on('health:capabilities-updated', ({ codex, claude }) => {\n      console.log('[Content] Engine capabilities updated:', { codex, claude });\n      bubbleUI.updateEngineAvailability({ codex, claude });\n    });\n\n    // Context clear\n    eventBus.on('context:clear', () => {\n      stateManager.batch({\n        'selection.elements': [],\n        'selection.screenshots': []\n      });\n      bubbleUI.updateSendButtonState();\n      if (contextTags) {\n        contextTags.render();\n      }\n      highlightManager.clearAll();\n    });\n\n    eventBus.on('projects:blocked', ({ host }) => {\n      if (stateManager.get('ui.bubbleVisible')) {\n        topBanner.update('LUMI is not configured for this page. Open Settings to map it to a project.');\n      }\n      bubbleUI.updateSendButtonState();\n    });\n\n    eventBus.on('projects:allowed', () => {\n      topBanner.hide();\n      bubbleUI.updateSendButtonState();\n    });\n\n    // Top banner notifications\n    eventBus.on('notify:error', (message) => {\n      topBanner.update(message);\n      setTimeout(() => topBanner.hide(), 2200);\n    });\n  }\n\n  // Keyboard shortcuts\n  function setupKeyboardShortcuts() {\n    document.addEventListener('keydown', (e) => {\n      // Ignore if typing in input\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\n        // Allow Cmd+Enter for submit\n        if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\n          eventBus.emit('submit:requested');\n          e.preventDefault();\n        }\n        return;\n      }\n\n      // Esc: Close bubble or deactivate mode\n      if (e.key === 'Escape') {\n        const isVisible = stateManager.get('ui.bubbleVisible');\n        const mode = stateManager.get('ui.mode');\n\n        if (mode !== 'idle') {\n          if (elementSelector) elementSelector.deactivate();\n          if (screenshotSelector) screenshotSelector.deactivate();\n        } else if (isVisible) {\n          eventBus.emit('bubble:close');\n        }\n        e.preventDefault();\n      }\n\n      // Cmd+E: Toggle element mode\n      if ((e.metaKey || e.ctrlKey) && e.key === 'e') {\n        eventBus.emit('mode:toggle-element');\n        e.preventDefault();\n      }\n\n      // Cmd+S: Toggle screenshot mode\n      if ((e.metaKey || e.ctrlKey) && e.key === 's') {\n        eventBus.emit('mode:toggle-screenshot');\n        e.preventDefault();\n      }\n\n      // Cmd+K: Clear context\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        eventBus.emit('context:clear');\n        e.preventDefault();\n      }\n    });\n  }\n\n  // Initialize application\n  async function init() {\n    console.log('[LUMI] Initializing...');\n\n    injectGlobalStyles();\n\n    // Mount UI components\n    bubbleUI.mount();\n    topBanner.mount();\n\n    // Mount context tags inside bubble shadow DOM\n    const shadowRoot = bubbleUI.getShadowRoot();\n    contextTags = new ContextTags(shadowRoot, eventBus, stateManager);\n    contextTags.mount();\n\n    // Initialize selectors after UI is ready\n    elementSelector = new ElementSelector(eventBus, stateManager, highlightManager, topBanner);\n    screenshotSelector = new ScreenshotSelector(eventBus, stateManager, highlightManager, topBanner, chromeBridge);\n\n    // Bind all events (after UI is mounted)\n    bindEvents();\n\n    // Setup keyboard shortcuts\n    setupKeyboardShortcuts();\n\n    // Listen for background messages\n    chromeBridge.onMessage((message) => {\n      if (message.type === 'TOGGLE_BUBBLE') {\n        eventBus.emit('bubble:toggle');\n      }\n    });\n\n    // Initialize engine (restore saved preference) - this will trigger engine:selected\n    await engineManager.init();\n\n    // Start health checker\n    healthChecker.start();\n\n    console.log('[LUMI] Initialized successfully');\n  }\n\n  // Start the application\n  init().catch(error => {\n    console.error('[LUMI] Initialization failed:', error);\n  });\n}\n"],"names":[],"mappings":"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A;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;EAEM,MAAM,aAAa,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;ECjkBD;EACA;EACA;;;EAIe,MAAM,QAAQ,CAAC;EAC9B,EAAE,WAAW,CAAC,QAAQ,EAAE,YAAY,EAAE;EACtC,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ;EAC5B,IAAI,IAAI,CAAC,Y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"}