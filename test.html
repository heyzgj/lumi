<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Resume Editor</title>
  <!-- 让 PDF 更好看一点的基础样式 -->
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #f3f4f6;
      color: #111827;
    }

    .app-container {
      display: flex;
      height: 100vh;
    }

    /* 左边预览区域 */
    .preview-pane {
      flex: 1;
      padding: 24px;
      overflow: auto;
      background: #e5e7eb;
      border-right: 1px solid #d1d5db;
    }

    .preview-inner {
      max-width: 800px;
      margin: 0 auto;
      background: #ffffff;
      padding: 32px 40px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
    }

    /* 右侧编辑器区域 */
    .editor-pane {
      width: 40%;
      min-width: 360px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      background: #111827;
      color: #e5e7eb;
    }

    .editor-header {
      margin-bottom: 12px;
    }

    .editor-header h1 {
      font-size: 18px;
      margin: 0 0 4px 0;
      color: #f9fafb;
    }

    .editor-header p {
      margin: 0;
      font-size: 12px;
      color: #9ca3af;
    }

    .editor-toolbar {
      display: flex;
      gap: 8px;
      margin: 12px 0;
    }

    .btn {
      padding: 6px 12px;
      font-size: 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      background: #2563eb;
      color: #f9fafb;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn.secondary {
      background: #374151;
    }

    .btn:hover {
      filter: brightness(1.05);
    }

    .editor-textarea {
      flex: 1;
      width: 100%;
      resize: none;
      border-radius: 8px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      padding: 10px 12px;
      font-size: 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      line-height: 1.5;
      outline: none;
    }

    /* 简历正文内的样式：经典美式布局 */

    .resume-name {
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .resume-contact {
      font-size: 11px;
      color: #4b5563;
      margin-bottom: 18px;
    }

    .resume-section {
      margin-bottom: 16px;
    }

    .resume-section-title {
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 4px;
      margin-bottom: 8px;
    }

    .resume-paragraph {
      font-size: 11px;
      line-height: 1.5;
      margin: 4px 0;
    }

    .resume-job {
      margin-bottom: 8px;
    }

    .resume-job-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .resume-job-title {
      font-size: 11px;
      font-weight: 600;
    }

    .resume-job-org {
      font-size: 11px;
      color: #4b5563;
    }

    .resume-job-date {
      font-size: 11px;
      color: #6b7280;
      margin-left: 12px;
      white-space: nowrap;
    }

    .resume-list {
      margin: 2px 0 2px 16px;
      padding: 0;
    }

    .resume-list li {
      font-size: 11px;
      line-height: 1.5;
      margin-bottom: 2px;
    }

    /* 打印优化：导出 PDF 时只导出预览部分 */
    @media print {
      body {
        background: #ffffff;
      }
      .editor-pane {
        display: none;
      }
      .preview-pane {
        border: none;
        padding: 0;
      }
      .preview-inner {
        box-shadow: none;
        margin: 0;
      }
    }
  </style>

  <!-- html2pdf.js CDN，用于导出 PDF -->
  <script src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- 左侧：简历预览 -->
    <div class="preview-pane">
      <div id="resume-preview" class="preview-inner">
        <!-- 这里的内容由 JS 初始化 / 更新 -->
      </div>
    </div>

    <!-- 右侧：编辑器 -->
    <div class="editor-pane">
      <div class="editor-header">
        <h1>简历编辑器</h1>
        <p>右侧编辑结构化简历内容，左侧实时预览 · 点击「导出 PDF」即可下载</p>
      </div>

      <div class="editor-toolbar">
        <button id="reset-btn" class="btn secondary">重置为当前简历</button>
        <button id="export-btn" class="btn">导出为 PDF</button>
      </div>

      <textarea id="resume-source" class="editor-textarea"></textarea>
    </div>
  </div>

  <script>
    // 这里用一个简单的「简历 DSL」，用 JSON-like 的结构来描述
    // 你可以直接在右侧修改这个文本（注意保持是合法的 JSON）
    const defaultResumeData = {
      name: "郑高峻",
      contact: "邮箱：xxxxxx@email.com · 电话：+86 xxx-xxxx-xxxx · 城市：深圳 / 可远程",
      summary: [
        "连续创业者与产品负责人，专注 AI 应用和开发者工具，拥有 4 年以上从 0 到 1 打造消费级 AI 产品并找到 PMF 的经验。",
        "作为 45AI 写真应用的创始人兼产品负责人，主导产品定位、模型落地与增长策略，在零买量前提下快速做到十万级付费用户和亿元级年化营收。",
        "早期在分布式资本、Bluehill 和出门问问负责投资分析、产品营销与公司战略，对模型能力、业务指标与用户体验有系统理解，目前通过开源项目在探索 LLM 与 coding agent 的实际落地。"
      ],
      experience: [
        {
          org: "遇见森林科技 Moriverse",
          title: "创始人 / 产品负责人（AI 应用）",
          date: "2020.11 – 至今",
          bullets: [
            "创立个性化 AI 应用公司，先后探索 AI 角色陪伴、3D 动画、AI 游戏资产工具，最终孵化 C 端爆款应用 45AI 写真，并获得前微软执行副总裁陆奇博士投资。",
            "负责 45AI 写真从 0 到 1，包括用户洞察、产品定位、体验设计和商业模式，针对中国审美和高使用门槛重新设计“一键出图”的 AI 写真体验。",
            "与 CTO 协同推进技术路线，承担问题定义、需求拆解、交互设计、GTM 策略到版本迭代的完整产品闭环，协调前端、后端、算法与设计团队。",
            "在零买量前提下，45AI 写真上线首日即获得 1 万+ 付费用户，7 日累计付费用户超 10 万，整体付费转化率 25%+，首周年化营收 run rate 破 1 亿人民币。",
            "主导 diffusion 模型选型和审美向微调，设计适配写真场景的提示词体系与 LoRA 训练数据流程，通过裁脸、高清化和角度矫正等处理，使生成图片下载率提升 300%+。",
            "制定小红书与公众号内容策略，产出多条数千赞级内容，公众号首月关注破 10 万，微信搜索指数峰值超 1000 万，成为赛道前二玩家；设计邀请码裂变机制，形成强口碑传播与闲鱼转卖现象。",
            "管理峰值 20+ 人跨职能团队，负责优先级、路线图与核心指标设定，搭建基于用户反馈与数据分析的迭代节奏。",
            "负责品牌与商务合作，推动 45AI 写真与海蓝之谜、Tom Ford、「恋与深空」等头部美妆与游戏 IP 联合营销，带来数百万元级营收并扩展应用场景。"
          ]
        },
        {
          org: "安朵教育科技 Andro School",
          title: "联合创始人",
          date: "2020",
          bullets: [
            "探索以 AI 赋能的新型幼儿园模式，负责产品设计、课程形态与业务模型搭建。",
            "受疫情影响停止扩张，将剩余资产整体出售给优睿卡教育。"
          ]
        },
        {
          org: "出门问问 Mobvoi",
          title: "企业战略经理 / 产品营销经理",
          date: "2019 – 2020",
          bullets: [
            "在企业战略团队参与公司 AI ToC 软硬件整体战略制定，分析智能硬件与语音交互业务的发展路径。",
            "后转岗至 Product Marketing，参与 TicWatch、TicPods 等智能硬件产品的市场定位、上市策略与整合营销，协同产品、销售与渠道团队推进落地。"
          ]
        },
        {
          org: "Bluehill.net",
          title: "投资合伙人",
          date: "2018 – 2019",
          bullets: [
            "联合创立早期项目孵化器，主导加密与 Web3 方向的项目筛选与投后支持。",
            "期间投资孵化 12+ 早期项目，从产品形态、用户增长与社区运营等维度陪伴团队成长。"
          ]
        },
        {
          org: "分布式资本",
          title: "投资经理",
          date: "2017 – 2018",
          bullets: [
            "负责区块链行业项目 sourcing、赛道研究与投资决策支持，参与 10+ 项目投资及尽调。",
            "包括 CertiK 等头部项目，整体组合获得数十倍回报。"
          ]
        }
      ],
      projects: [
        {
          name: "LUMI – 浏览器内 AI IDE / Coding Agent 助手（开源进行中）",
          bullets: [
            "面向设计师 / 产品 / 前端，解决在真实网页上发现文案、UI、动效问题时难以向工程师或 AI IDE 准确表达意图的问题。",
            "通过浏览器插件在生产环境中选中元素、可视化调整样式或添加批注，自动生成包含元素 diff 与截图的结构化 Intent Prompt，可一键交给 Lovable / Cursor / Gemini 等 AI IDE，或直接调用本地 Codex / Claude Code / Gemini CLI 修改代码。",
            "让不会写代码的成员也能在页面上直接“所见即所得”地驱动 coding agent，显著降低跨职能沟通成本，项目以开源形态持续迭代为面向设计 / 产品 / 前端的浏览器原生 AI IDE。"
          ]
        },
        {
          name: "Cursor Project Master / Cursor Autopilot – 面向 Cursor 的 AI 开发工作流模板（开源）",
          bullets: [
            "针对 Cursor 用户在长期项目中缺乏“从 PRD 到上线”结构化工作流的问题，设计统一的项目结构与文档模板。",
            "在编辑器内用文件与命名约定搭建类似 Kanban 的任务视图，并设计围绕 Idea → Spec → Tasks → Code → Review 的系统提示与对话节奏，形成可复用的 Autopilot 工作流。",
            "帮助开发者将大模型从一次性问答工具升级为有记忆、有结构的项目伙伴，在开源社区获得 150+ GitHub Star，被众多 Cursor 用户用作默认项目骨架与工作流参考。"
          ]
        }
      ],
      education: [
        {
          school: "哥伦比亚大学 Columbia University",
          degree: "数学学士",
          date: "2013 – 2017"
        }
      ]
    };

    const previewEl = document.getElementById("resume-preview");
    const textareaEl = document.getElementById("resume-source");
    const resetBtn = document.getElementById("reset-btn");
    const exportBtn = document.getElementById("export-btn");

    function renderResume(data) {
      // 生成经典美式布局 HTML
      let html = "";

      html += `<div class="resume-name">${data.name}</div>`;
      html += `<div class="resume-contact">${data.contact}</div>`;

      // Summary
      if (data.summary && data.summary.length) {
        html += `<div class="resume-section">
          <div class="resume-section-title">职业概述</div>
        `;
        data.summary.forEach(p => {
          html += `<p class="resume-paragraph">${p}</p>`;
        });
        html += `</div>`;
      }

      // Experience
      if (data.experience && data.experience.length) {
        html += `<div class="resume-section">
          <div class="resume-section-title">工作经历</div>
        `;
        data.experience.forEach(job => {
          html += `<div class="resume-job">
            <div class="resume-job-header">
              <div>
                <div class="resume-job-title">${job.title}</div>
                <div class="resume-job-org">${job.org}</div>
              </div>
              <div class="resume-job-date">${job.date}</div>
            </div>
          `;
          if (job.bullets && job.bullets.length) {
            html += `<ul class="resume-list">`;
            job.bullets.forEach(b => {
              html += `<li>${b}</li>`;
            });
            html += `</ul>`;
          }
          html += `</div>`;
        });
        html += `</div>`;
      }

      // Projects
      if (data.projects && data.projects.length) {
        html += `<div class="resume-section">
          <div class="resume-section-title">个人项目与开源实践</div>
        `;
        data.projects.forEach(p => {
          html += `<div class="resume-job">
            <div class="resume-job-header">
              <div class="resume-job-title">${p.name}</div>
            </div>
          `;
          if (p.bullets && p.bullets.length) {
            html += `<ul class="resume-list">`;
            p.bullets.forEach(b => {
              html += `<li>${b}</li>`;
            });
            html += `</ul>`;
          }
          html += `</div>`;
        });
        html += `</div>`;
      }

      // Education
      if (data.education && data.education.length) {
        html += `<div class="resume-section">
          <div class="resume-section-title">教育背景</div>
        `;
        data.education.forEach(ed => {
          html += `<div class="resume-job">
            <div class="resume-job-header">
              <div>
                <div class="resume-job-title">${ed.school}</div>
                <div class="resume-job-org">${ed.degree}</div>
              </div>
              <div class="resume-job-date">${ed.date}</div>
            </div>
          </div>`;
        });
        html += `</div>`;
      }

      previewEl.innerHTML = html;
    }

    function loadInitial() {
      const text = JSON.stringify(defaultResumeData, null, 2);
      textareaEl.value = text;
      renderResume(defaultResumeData);
    }

    // 编辑器变更时，尝试解析 JSON 并更新预览
    textareaEl.addEventListener("input", () => {
      const text = textareaEl.value;
      try {
        const parsed = JSON.parse(text);
        renderResume(parsed);
        textareaEl.style.borderColor = "#4b5563";
      } catch (err) {
        // JSON 解析错误时，用红边提示，但不打断当前预览
        textareaEl.style.borderColor = "#dc2626";
      }
    });

    resetBtn.addEventListener("click", () => {
      loadInitial();
    });

    exportBtn.addEventListener("click", () => {
      const element = document.getElementById("resume-preview");

      const opt = {
        margin:       0.4,
        filename:     'resume.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2, useCORS: true },
        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save();
    });

    loadInitial();
  </script>
</body>
</html>
